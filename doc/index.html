<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.5">
<meta name="author" content="Stefano Trettel">
<title>LuaJack Reference Manual</title>
<style>
/*! normalize.css v2.1.2 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address `[hidden]` styling not present in IE 8/9. Hide the `template` element in IE, Safari, and Firefox < 22. */
[hidden], template { display: none; }

script { display: none !important; }

/* ========================================================================== Base ========================================================================== */
/** 1. Set default font family to sans-serif. 2. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { font-family: sans-serif; /* 1 */ -ms-text-size-adjust: 100%; /* 2 */ -webkit-text-size-adjust: 100%; /* 2 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Remove the gray background color from active links in IE 10. */
a { background: transparent; }

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

meta.foundation-mq-small { font-family: "only screen and (min-width: 768px)"; width: 768px; }

meta.foundation-mq-medium { font-family: "only screen and (min-width:1280px)"; width: 1280px; }

meta.foundation-mq-large { font-family: "only screen and (min-width:1440px)"; width: 1440px; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased, body { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { line-height: 1.4; color: #003b6b; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #00579e; text-decoration: none; line-height: inherit; }
a:hover, a:focus { color: #333333; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: Arial, sans-serif; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 0.75em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Arial, sans-serif; font-weight: normal; font-style: normal; color: #7b2d00; text-rendering: optimizeLegibility; margin-top: 0.5em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #ff6b15; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: bold; color: #003426; }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 0.75em; list-style-position: outside; font-family: Arial, sans-serif; }

ul, ol { margin-left: 1.5em; }
ul.no-bullet, ol.no-bullet { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3em; font-weight: bold; }
dl dd { margin-bottom: 0.75em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: black; border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 0.75em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: 0.8125em; color: #e15200; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #e15200; }

blockquote, blockquote p { line-height: 1.6; color: #333333; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 1px #d8d8ce; }
table thead, table tfoot { background: -webkit-linear-gradient(top, #add386, #90b66a); font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: white; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #6d6e71; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #edf2f2; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.4; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }

a:hover, a:focus { text-decoration: underline; }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

*:not(pre) > code { font-size: inherit; font-style: normal !important; letter-spacing: 0; padding: 3px 2px 1px 2px; background-color: #eeeeee; border: 1px solid #dddddd; -webkit-border-radius: 0; border-radius: 0; line-height: inherit; }

pre, pre > code { line-height: 1.6; color: black; font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; }

.keyseq { color: #333333; }

kbd { display: inline-block; color: black; font-size: 0.75em; line-height: 1.4; background-color: #f7f7f7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }

.keyseq kbd:first-child { margin-left: 0; }

.keyseq kbd:last-child { margin-right: 0; }

.menuseq, .menu { color: black; }

b.button:before, b.button:after { position: relative; top: -1px; font-weight: normal; }

b.button:before { content: "["; padding: 0 3px 0 2px; }

b.button:after { content: "]"; padding: 0 2px 0 3px; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 1.5em; padding-right: 1.5em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#content { margin-top: 1.25em; }

#content:before { content: none; }

#header > h1:first-child { color: #7b2d00; margin-top: 2.25rem; margin-bottom: 0; }
#header > h1:first-child + #toc { margin-top: 8px; border-top: 1px solid #dddddd; }
#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) { border-bottom: 1px solid #dddddd; padding-bottom: 8px; }
#header .details { border-bottom: 1px solid #dddddd; line-height: 1.45; padding-top: 0.25em; padding-bottom: 0.25em; padding-left: 0.25em; color: #e15200; display: -ms-flexbox; display: -webkit-flex; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; }
#header .details span:first-child { margin-left: -0.125em; }
#header .details span.email a { color: #333333; }
#header .details br { display: none; }
#header .details br + span:before { content: "\00a0\2013\00a0"; }
#header .details br + span.author:before { content: "\00a0\22c5\00a0"; color: #333333; }
#header .details br + span#revremark:before { content: "\00a0|\00a0"; }
#header #revnumber { text-transform: capitalize; }
#header #revnumber:after { content: "\00a0"; }

#content > h1:first-child:not([class]) { color: #7b2d00; border-bottom: 1px solid #dddddd; padding-bottom: 8px; margin-top: 0; padding-top: 1rem; margin-bottom: 1.25rem; }

#toc { border-bottom: 0 solid #dddddd; padding-bottom: 0.5em; }
#toc > ul { margin-left: 0.125em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin: 0.5em 0; }
#toc ul { font-family: Arial, sans-serif; list-style-type: none; }
#toc a { text-decoration: none; }
#toc a:active { text-decoration: underline; }

#toctitle { color: #003b6b; font-size: 1.2em; }

@media only screen and (min-width: 768px) { #toctitle { font-size: 1.375em; }
  body.toc2 { padding-left: 15em; padding-right: 0; }
  #toc.toc2 { margin-top: 0 !important; background-color: white; position: fixed; width: 15em; left: 0; top: 0; border-right: 1px solid #dddddd; border-top-width: 0 !important; border-bottom-width: 0 !important; z-index: 1000; padding: 1.25em 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; font-size: 1.2em; }
  #toc.toc2 > ul { font-size: 0.9em; margin-bottom: 0; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 15em; }
  body.toc2.toc-right #toc.toc2 { border-right-width: 0; border-left: 1px solid #dddddd; left: auto; right: 0; } }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; padding-right: 0; }
  #toc.toc2 { width: 20em; }
  #toc.toc2 #toctitle { font-size: 1.375em; }
  #toc.toc2 > ul { font-size: 0.95em; }
  #toc.toc2 ul ul { padding-left: 1.25em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 0; border-radius: 0; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }

#footer { max-width: 100%; background-color: none; padding: 1.25em; }

#footer-text { color: black; line-height: 1.44; }

.sect1 { padding-bottom: 0.625em; }

@media only screen and (min-width: 768px) { .sect1 { padding-bottom: 1.25em; } }
.sect1 + .sect1 { border-top: 0 solid #dddddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; z-index: 1001; width: 1.5ex; margin-left: -1.5ex; display: block; text-decoration: none !important; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: "\00A7"; font-size: 0.85em; display: block; padding-top: 0.1em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #7b2d00; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #622400; }

.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-rendering: optimizeLegibility; text-align: left; }

table.tableblock > caption.title { white-space: nowrap; overflow: visible; max-width: 0; }

.paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { color: #7b2d00; }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border-collapse: separate; border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; font-family: Arial, sans-serif; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #e15200; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 0; border-radius: 0; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 0; border-radius: 0; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock > .content > .title { color: #003b6b; margin-top: 0; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock pre, .listingblock pre:not(.highlight), .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint { background: #eeeeee; }
.sidebarblock .literalblock pre, .sidebarblock .listingblock pre:not(.highlight), .sidebarblock .listingblock pre[class="highlight"], .sidebarblock .listingblock pre[class^="highlight "], .sidebarblock .listingblock pre.CodeRay, .sidebarblock .listingblock pre.prettyprint { background: #f2f1f1; }

.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { border: 1px dashed #666666; -webkit-border-radius: 0; border-radius: 0; word-wrap: break-word; padding: 1.25em 1.5625em 1.125em 1.5625em; font-size: 0.8125em; }
.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
@media only screen and (min-width: 768px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 0.90625em; } }
@media only screen and (min-width: 1280px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 1em; } }

.literalblock.output pre { color: #eeeeee; background-color: black; }

.listingblock pre.highlightjs { padding: 0; }
.listingblock pre.highlightjs > code { padding: 1.25em 1.5625em 1.125em 1.5625em; -webkit-border-radius: 0; border-radius: 0; }

.listingblock > .content { position: relative; }

.listingblock code[data-lang]:before { display: none; content: attr(data-lang); position: absolute; font-size: 0.75em; top: 0.425rem; right: 0.5rem; line-height: 1; text-transform: uppercase; color: #999; }

.listingblock:hover code[data-lang]:before { display: block; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: "$"; }

table.pyhltable { border-collapse: separate; border: 0; margin-bottom: 0; background: none; }

table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; }

table.pyhltable td.code { padding-left: .75em; padding-right: 0; }

pre.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }

pre.pygments .lineno { display: inline-block; margin-right: .25em; }

table.pyhltable .linenodiv { background: none !important; padding-right: 0 !important; }

.quoteblock { margin: 0 1em 0.75em 1.5em; display: table; }
.quoteblock > .title { margin-left: -1.5em; margin-bottom: 0.75em; }
.quoteblock blockquote, .quoteblock blockquote p { color: #333333; font-size: 1.15rem; line-height: 1.75; word-spacing: 0.1em; letter-spacing: 0; font-style: italic; text-align: justify; }
.quoteblock blockquote { margin: 0; padding: 0; border: 0; }
.quoteblock blockquote:before { content: "\201c"; float: left; font-size: 2.75em; font-weight: bold; line-height: 0.6em; margin-left: -0.6em; color: #003b6b; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: 0.5em; margin-right: 0.5ex; text-align: right; }
.quoteblock .quoteblock { margin-left: 0; margin-right: 0; padding: 0.5em 0; border-left: 3px solid #e15200; }
.quoteblock .quoteblock blockquote { padding: 0 0 0 0.75em; }
.quoteblock .quoteblock blockquote:before { display: none; }

.verseblock { margin: 0 1em 0.75em 1em; }
.verseblock pre { font-family: "Open Sans", "DejaVu Sans", sans; font-size: 1.15rem; color: #333333; font-weight: 300; text-rendering: optimizeLegibility; }
.verseblock pre strong { font-weight: 400; }
.verseblock .attribution { margin-top: 1.25rem; margin-left: 0.5ex; }

.quoteblock .attribution, .verseblock .attribution { font-size: 0.8125em; line-height: 1.45; font-style: italic; }
.quoteblock .attribution br, .verseblock .attribution br { display: none; }
.quoteblock .attribution cite, .verseblock .attribution cite { display: block; letter-spacing: -0.05em; color: #e15200; }

.quoteblock.abstract { margin: 0 0 0.75em 0; display: block; }
.quoteblock.abstract blockquote, .quoteblock.abstract blockquote p { text-align: left; word-spacing: 0; }
.quoteblock.abstract blockquote:before, .quoteblock.abstract blockquote p:first-of-type:before { display: none; }

table.tableblock { max-width: 100%; border-collapse: separate; }
table.tableblock td > .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child { margin-bottom: 0; }

table.spread { width: 100%; }

table.tableblock, th.tableblock, td.tableblock { border: 0 solid #d8d8ce; }

table.grid-all th.tableblock, table.grid-all td.tableblock { border-width: 0 1px 1px 0; }

table.grid-all tfoot > tr > th.tableblock, table.grid-all tfoot > tr > td.tableblock { border-width: 1px 1px 0 0; }

table.grid-cols th.tableblock, table.grid-cols td.tableblock { border-width: 0 1px 0 0; }

table.grid-all * > tr > .tableblock:last-child, table.grid-cols * > tr > .tableblock:last-child { border-right-width: 0; }

table.grid-rows th.tableblock, table.grid-rows td.tableblock { border-width: 0 0 1px 0; }

table.grid-all tbody > tr:last-child > th.tableblock, table.grid-all tbody > tr:last-child > td.tableblock, table.grid-all thead:last-child > tr > th.tableblock, table.grid-rows tbody > tr:last-child > th.tableblock, table.grid-rows tbody > tr:last-child > td.tableblock, table.grid-rows thead:last-child > tr > th.tableblock { border-bottom-width: 0; }

table.grid-rows tfoot > tr > th.tableblock, table.grid-rows tfoot > tr > td.tableblock { border-width: 1px 0 0 0; }

table.frame-all { border-width: 1px; }

table.frame-sides { border-width: 0 1px; }

table.frame-topbot { border-width: 1px 0; }

th.halign-left, td.halign-left { text-align: left; }

th.halign-right, td.halign-right { text-align: right; }

th.halign-center, td.halign-center { text-align: center; }

th.valign-top, td.valign-top { vertical-align: top; }

th.valign-bottom, td.valign-bottom { vertical-align: bottom; }

th.valign-middle, td.valign-middle { vertical-align: middle; }

table thead th, table tfoot th { font-weight: bold; }

tbody tr th { display: table-cell; line-height: 1.4; background: -webkit-linear-gradient(top, #add386, #90b66a); }

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p { color: white; font-weight: bold; }

p.tableblock > code:only-child { background: none; padding: 0; }

p.tableblock { font-size: 1em; }

td > div.verse { white-space: pre; }

ol { margin-left: 1.75em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.375em; }

ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }

ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > .fa-square-o:first-child, ul.checklist li > p:first-child > .fa-check-square-o:first-child { width: 1em; font-size: 0.85em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { width: 1em; position: relative; top: 1px; }

ul.inline { margin: 0 auto 0.375em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1 { padding-right: .75em; font-weight: bold; }

td.hdlist1, td.hdlist2 { vertical-align: top; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0 0.75em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; }

span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }
span.footnote a:active, span.footnoteref a:active { text-decoration: underline; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em; line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }

#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: 0; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > .fa { cursor: default; }

.admonitionblock td.icon [class^="fa icon-"] { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #004176; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum[data-value] { display: inline-block; color: #fff !important; background-color: black; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; font-size: 0.75em; width: 1.67em; height: 1.67em; line-height: 1.67em; font-family: "Open Sans", "DejaVu Sans", sans-serif; font-style: normal; font-weight: bold; }
.conum[data-value] * { color: #fff !important; }
.conum[data-value] + b { display: none; }
.conum[data-value]:after { content: attr(data-value); }
pre .conum[data-value] { position: relative; top: -0.125em; }

b.conum * { color: inherit !important; }

.conum:not([data-value]):empty { display: none; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { border-bottom: 1px solid #dddddd; }

.sect1 { padding-bottom: 0; }

#toctitle { color: #00406F; font-weight: normal; margin-top: 1.5em; }

.sidebarblock { border-color: #aaa; }

code { -webkit-border-radius: 4px; border-radius: 4px; }

p.tableblock.header { color: #6d6e71; }

.literalblock pre, .listingblock pre { background: #eeeeee; }

</style>
<style>
.listingblock .pygments .hll { background-color: #ffffcc }
.listingblock .pygments, .listingblock .pygments code { background: #ffffff; }
.listingblock .pygments .tok-c { color: #aaaaaa; font-style: italic } /* Comment */
.listingblock .pygments .tok-err { color: #FF0000; background-color: #FFAAAA } /* Error */
.listingblock .pygments .tok-k { color: #0000aa } /* Keyword */
.listingblock .pygments .tok-ch { color: #aaaaaa; font-style: italic } /* Comment.Hashbang */
.listingblock .pygments .tok-cm { color: #aaaaaa; font-style: italic } /* Comment.Multiline */
.listingblock .pygments .tok-cp { color: #4c8317 } /* Comment.Preproc */
.listingblock .pygments .tok-cpf { color: #aaaaaa; font-style: italic } /* Comment.PreprocFile */
.listingblock .pygments .tok-c1 { color: #aaaaaa; font-style: italic } /* Comment.Single */
.listingblock .pygments .tok-cs { color: #0000aa; font-style: italic } /* Comment.Special */
.listingblock .pygments .tok-gd { color: #aa0000 } /* Generic.Deleted */
.listingblock .pygments .tok-ge { font-style: italic } /* Generic.Emph */
.listingblock .pygments .tok-gr { color: #aa0000 } /* Generic.Error */
.listingblock .pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
.listingblock .pygments .tok-gi { color: #00aa00 } /* Generic.Inserted */
.listingblock .pygments .tok-go { color: #888888 } /* Generic.Output */
.listingblock .pygments .tok-gp { color: #555555 } /* Generic.Prompt */
.listingblock .pygments .tok-gs { font-weight: bold } /* Generic.Strong */
.listingblock .pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.listingblock .pygments .tok-gt { color: #aa0000 } /* Generic.Traceback */
.listingblock .pygments .tok-kc { color: #0000aa } /* Keyword.Constant */
.listingblock .pygments .tok-kd { color: #0000aa } /* Keyword.Declaration */
.listingblock .pygments .tok-kn { color: #0000aa } /* Keyword.Namespace */
.listingblock .pygments .tok-kp { color: #0000aa } /* Keyword.Pseudo */
.listingblock .pygments .tok-kr { color: #0000aa } /* Keyword.Reserved */
.listingblock .pygments .tok-kt { color: #00aaaa } /* Keyword.Type */
.listingblock .pygments .tok-m { color: #009999 } /* Literal.Number */
.listingblock .pygments .tok-s { color: #aa5500 } /* Literal.String */
.listingblock .pygments .tok-na { color: #1e90ff } /* Name.Attribute */
.listingblock .pygments .tok-nb { color: #00aaaa } /* Name.Builtin */
.listingblock .pygments .tok-nc { color: #00aa00; text-decoration: underline } /* Name.Class */
.listingblock .pygments .tok-no { color: #aa0000 } /* Name.Constant */
.listingblock .pygments .tok-nd { color: #888888 } /* Name.Decorator */
.listingblock .pygments .tok-ni { color: #880000; font-weight: bold } /* Name.Entity */
.listingblock .pygments .tok-nf { color: #00aa00 } /* Name.Function */
.listingblock .pygments .tok-nn { color: #00aaaa; text-decoration: underline } /* Name.Namespace */
.listingblock .pygments .tok-nt { color: #1e90ff; font-weight: bold } /* Name.Tag */
.listingblock .pygments .tok-nv { color: #aa0000 } /* Name.Variable */
.listingblock .pygments .tok-ow { color: #0000aa } /* Operator.Word */
.listingblock .pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
.listingblock .pygments .tok-mb { color: #009999 } /* Literal.Number.Bin */
.listingblock .pygments .tok-mf { color: #009999 } /* Literal.Number.Float */
.listingblock .pygments .tok-mh { color: #009999 } /* Literal.Number.Hex */
.listingblock .pygments .tok-mi { color: #009999 } /* Literal.Number.Integer */
.listingblock .pygments .tok-mo { color: #009999 } /* Literal.Number.Oct */
.listingblock .pygments .tok-sa { color: #aa5500 } /* Literal.String.Affix */
.listingblock .pygments .tok-sb { color: #aa5500 } /* Literal.String.Backtick */
.listingblock .pygments .tok-sc { color: #aa5500 } /* Literal.String.Char */
.listingblock .pygments .tok-dl { color: #aa5500 } /* Literal.String.Delimiter */
.listingblock .pygments .tok-sd { color: #aa5500 } /* Literal.String.Doc */
.listingblock .pygments .tok-s2 { color: #aa5500 } /* Literal.String.Double */
.listingblock .pygments .tok-se { color: #aa5500 } /* Literal.String.Escape */
.listingblock .pygments .tok-sh { color: #aa5500 } /* Literal.String.Heredoc */
.listingblock .pygments .tok-si { color: #aa5500 } /* Literal.String.Interpol */
.listingblock .pygments .tok-sx { color: #aa5500 } /* Literal.String.Other */
.listingblock .pygments .tok-sr { color: #009999 } /* Literal.String.Regex */
.listingblock .pygments .tok-s1 { color: #aa5500 } /* Literal.String.Single */
.listingblock .pygments .tok-ss { color: #0000aa } /* Literal.String.Symbol */
.listingblock .pygments .tok-bp { color: #00aaaa } /* Name.Builtin.Pseudo */
.listingblock .pygments .tok-fm { color: #00aa00 } /* Name.Function.Magic */
.listingblock .pygments .tok-vc { color: #aa0000 } /* Name.Variable.Class */
.listingblock .pygments .tok-vg { color: #aa0000 } /* Name.Variable.Global */
.listingblock .pygments .tok-vi { color: #aa0000 } /* Name.Variable.Instance */
.listingblock .pygments .tok-vm { color: #aa0000 } /* Name.Variable.Magic */
.listingblock .pygments .tok-il { color: #009999 } /* Literal.Number.Integer.Long */
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>LuaJack Reference Manual</h1>
<div class="details">
<span id="author" class="author">Stefano Trettel</span><br>
<span id="revnumber">version 0.5,</span>
<span id="revdate">2016-07-03</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_preface">Preface</a>
<ul class="sectlevel2">
<li><a href="#_getting_and_installing">Getting and installing</a></li>
<li><a href="#_module_organization">Module organization</a></li>
<li><a href="#_examples">Examples</a></li>
<li><a href="#_license">License</a></li>
</ul>
</li>
<li><a href="#_introduction">Introduction</a>
<ul class="sectlevel2">
<li><a href="#_an_example_application">An example application</a></li>
<li><a href="#_luajack_contexts">LuaJack contexts</a></li>
</ul>
</li>
<li><a href="#_luajack_functions">LuaJack functions</a>
<ul class="sectlevel2">
<li><a href="#_clients">Clients</a></li>
<li><a href="#_real_time_callbacks">Real-time callbacks</a></li>
<li><a href="#_non_real_time_callbacks">Non real-time callbacks</a></li>
<li><a href="#_client_threads">Client threads</a></li>
<li><a href="#_ports">Ports</a></li>
<li><a href="#_latency">Latency</a></li>
<li><a href="#_time">Time</a></li>
<li><a href="#_transport_and_timebase">Transport and timebase</a></li>
<li><a href="#_reading_and_writing_audio_data">Reading and writing audio data</a></li>
<li><a href="#_reading_and_writing_midi_data">Reading and writing MIDI data</a></li>
<li><a href="#_statistics">Statistics</a></li>
<li><a href="#_session_api">Session API</a></li>
<li><a href="#_ringbuffers">Ringbuffers</a></li>
<li><a href="#_selectable_ringbuffers">Selectable ringbuffers</a></li>
<li><a href="#_jack_server_control_api">JACK server control API</a></li>
<li><a href="#_non_callback_api">Non-callback API</a></li>
<li><a href="#_internal_clients_api">Internal clients API</a></li>
<li><a href="#_metadata_api">Metadata API</a></li>
<li><a href="#_additional_functions">Additional functions</a></li>
</ul>
</li>
<li><a href="#midi_utilities">MIDI utilities (luajack.midi)</a>
<ul class="sectlevel2">
<li><a href="#_encoding_midi_messages">Encoding MIDI messages</a></li>
<li><a href="#_decoding_midi_messages">Decoding MIDI messages</a></li>
<li><a href="#_other_midi_utilities">Other MIDI utilities</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<a class="image" href="http://www.lua.org"><img src="powered-by-lua.png" alt="Lua logo"></a>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_preface">Preface</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is the reference manual of <strong>LuaJack</strong>, which is a
<a href="http://www.lua.org"><strong>Lua</strong></a> binding library for the
<a href="http://jackaudio.org"><strong>JACK Audio Connection Kit</strong></a>.
<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnote_1" title="View footnote.">1</a>]</sup></p>
</div>
<div class="paragraph">
<p>It is assumed that the reader is familiar with both JACK and the Lua programming language.</p>
</div>
<div class="paragraph">
<p>For convenience of reference, this document contains external (deep) links to the
<a href="http://www.lua.org/manual/5.3/manual.html">Lua Reference Manual</a> and to the
<a href="http://jackaudio.org/api/">JACK API documentation</a>.</p>
</div>
<div class="sect2">
<h3 id="_getting_and_installing">Getting and installing</h3>
<div class="paragraph">
<p>For installation intructions, refer to the README file in the
<a href="https://github.com/stetre/luajack"><strong>LuaJack official repository</strong></a>
on GitHub.</p>
</div>
</div>
<div class="sect2">
<h3 id="_module_organization">Module organization</h3>
<div class="paragraph">
<p>The LuaJack module is loaded using Lua&#8217;s
<a href="http://www.lua.org/manual/5.3/manual.html#pdf-require">require</a>() and
returns a table containing the functions it provides
(as usual with Lua modules). This manual assumes that such
table is named <strong>jack</strong>, i.e. that it is loaded with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="lua"> <span class="tok-n">jack</span> <span class="tok-o">=</span> <span class="tok-nb">require</span><span class="tok-p">(</span><span class="tok-s2">&quot;luajack&quot;</span><span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>but nothing forbids the use of a different name.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples">Examples</h3>
<div class="paragraph">
<p>A few examples can be found in the <strong>examples/</strong> directory of the release package
(some of them are LuaJack versions of the examples that come with the original JACK1
and JACK2 software).</p>
</div>
</div>
<div class="sect2">
<h3 id="_license">License</h3>
<div class="paragraph">
<p>LuaJack is released under the <strong>MIT/X11 license</strong> (same as
<a href="http://www.lua.org/license.html">Lua</a>, and with the same only requirement to give proper
credits to the original author).
The copyright notice is in the LICENSE file in the base directory
of the <a href="https://github.com/stetre/luajack">official repository</a> on GitHub.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_an_example_application">An example application</h3>
<div class="paragraph">
<p>A LuaJack application, apart from being written in Lua instead of C, looks very
similar to a standard JACK application.</p>
</div>
<div class="paragraph">
<p>An example is shown below: it creates a JACK client with a couple of ports, then
it registers some callbacks, activates the client and eventually sleeps while waiting
for JACK to call back.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
LuaJack applications must implement their main loop using the
<a href="#jack.sleep">jack.sleep</a>() function.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="lua"> <span class="tok-n">jack</span> <span class="tok-o">=</span> <span class="tok-nb">require</span><span class="tok-p">(</span><span class="tok-s2">&quot;luajack&quot;</span><span class="tok-p">)</span>
 <span class="tok-c1">-- This is the &#39;main script&#39;, executed in the &#39;main context&#39;.</span>

 <span class="tok-c1">-- Open a JACK client:</span>
 <span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">jack</span><span class="tok-p">.</span><span class="tok-n">client_open</span><span class="tok-p">(</span><span class="tok-s2">&quot;myclient&quot;</span><span class="tok-p">)</span>

 <span class="tok-c1">-- Create two ports:</span>
 <span class="tok-n">p_in</span> <span class="tok-o">=</span> <span class="tok-n">jack</span><span class="tok-p">.</span><span class="tok-n">input_audio_port</span><span class="tok-p">(</span><span class="tok-s2">&quot;port_in&quot;</span><span class="tok-p">)</span>
 <span class="tok-n">p_out</span> <span class="tok-o">=</span> <span class="tok-n">jack</span><span class="tok-p">.</span><span class="tok-n">output_audio_port</span><span class="tok-p">(</span><span class="tok-s2">&quot;port_out&quot;</span><span class="tok-p">)</span>

 <span class="tok-c1">-- Load the process chunk:</span>
 <span class="tok-n">jack</span><span class="tok-p">.</span><span class="tok-n">process_load</span><span class="tok-p">(</span><span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-s">[[</span>
<span class="tok-s"> c, p_in, p_out = table.unpack(arg)</span>

<span class="tok-s"> function process(nframes)</span>
<span class="tok-s">    -- Audio processing happens here (in this example, we just</span>
<span class="tok-s">    -- copy the samples from the input port to the output port).</span>
<span class="tok-s">    jack.get_buffer(p_in)</span>
<span class="tok-s">    jack.get_buffer(p_out)</span>
<span class="tok-s">    jack.copy(p_out, p_in)</span>
<span class="tok-s"> end</span>

<span class="tok-s"> -- Register the (rt) process callback:</span>
<span class="tok-s"> jack.process_callback(c, process)</span>
<span class="tok-s"> ]]</span><span class="tok-p">,</span> <span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-n">p_in</span><span class="tok-p">,</span> <span class="tok-n">p_out</span><span class="tok-p">)</span>

 <span class="tok-c1">-- Register a non-rt callback:</span>
 <span class="tok-n">jack</span><span class="tok-p">.</span><span class="tok-n">shutdown_callback</span><span class="tok-p">(</span><span class="tok-n">c</span><span class="tok-p">,</span> <span class="tok-kr">function</span><span class="tok-p">()</span> <span class="tok-nb">error</span><span class="tok-p">(</span><span class="tok-s2">&quot;shutdown from server&quot;</span><span class="tok-p">)</span> <span class="tok-kr">end</span><span class="tok-p">)</span>

 <span class="tok-c1">-- Activate the client:</span>
 <span class="tok-n">jack</span><span class="tok-p">.</span><span class="tok-n">activate</span><span class="tok-p">(</span><span class="tok-n">c</span><span class="tok-p">)</span>

 <span class="tok-c1">-- Sleep, waiting for JACK to call back:</span>
 <span class="tok-n">jack</span><span class="tok-p">.</span><span class="tok-n">sleep</span><span class="tok-p">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The main deviation from an hypothetical standard implementation of the same example
is in the use of the <a href="#jack.process_load">jack.process_load</a>() function to 'load'
the real-time part of the application. This difference should be (hopefully) clear
after reading the next subsection.</p>
</div>
</div>
<div class="sect2">
<h3 id="_luajack_contexts">LuaJack contexts</h3>
<div id="luajack.contexts" class="paragraph">
<p>In this document we use the word <strong>'context'</strong> to refer to the combination of
the pthread and the <a href="http://www.lua.org/manual/5.3/manual.html#lua_State">Lua state</a>
a chunk of Lua code is executed in.</p>
</div>
<div class="paragraph">
<p>Since LuaJack relies on libjack, which is a multithreaded library, it has more than
one context where to execute the Lua chunks of an application. More precisely,
there are (basically) three types of contexts in LuaJack:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The <strong>main context</strong>, where the main script is executed. Clients, ports, etc.
are created here, and the <a href="#jack.sleep">main loop</a> and the (Lua)
<a href="#_non_real_time_callbacks">non real-time callbacks</a> are executed here, too.
The main context is composed of the main pthread and the main Lua state, i.e. the
state created by the Lua interpreter.
There is one main context in a LuaJack application, and it is shared
by all the clients the application creates.<br></p>
</li>
<li>
<p>The <strong>process context</strong>, where the <a href="#_real_time_callbacks">real-time callbacks</a>
are executed.
It is composed of the (possibly) real-time pthread created by JACK for processing audio,
and a dedicated Lua state. Each client has its own process context, which it creates
with the <a href="#jack.process_load">jack.process_load</a>( ) function, passing it the Lua code
to be executed there (the <strong>'process chunk'</strong>).<br></p>
</li>
<li>
<p>The <strong>thread context</strong>, where a <a href="#_client_threads">client thread</a> is executed.
It is composed of the pthread created for it by JACK and a dedicated Lua state.
Each client thread has its own thread context, which is created with the client thread
itself by means of the <a href="#jack.thread_load">jack.thread_load</a>( ) function, passing it
the Lua code to be executed there (the <strong>'thread chunk'</strong>).<br></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>All the above <strong>Lua states are unrelated</strong> (that is, independent) and thus the corresponding
contexts are insulated one from each other (they have separated namespaces and don&#8217;t share
memory) as far as Lua code is concerned.</p>
</div>
<div class="paragraph">
<p>Communication between different contexts is achievable by means of parameter passing (when
creating a context), and via the lock-free <a href="#_ringbuffers">ringbuffers</a> provided by JACK.
As another mechanism of communication, client threads may also <a href="#jack.wait">wait</a> in their
context to be <a href="#jack.signal">signalled</a> from other contexts (each client thread has a
pthread condition variable associated with it for this purpose).</p>
</div>
<div id="loading_luajack" class="paragraph">
<p>The LuaJack module is to be explicitly loaded (i.e. <em>jack = require("luajack")</em>)
only in the main script. There is no need to load it in process chunks and thread chunks
because they are executed in Lua states where the LuaJack module is automatically pre-loaded
in a global table named <strong>'jack'</strong>. This pre-loaded module is actually a limited version of
the full LuaJack module, in that it contains only the subset of functions that can be
directly used in the process or thread context.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_luajack_functions">LuaJack functions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>LuaJack functions are described in the following subsections. All of them are members of the <strong>jack</strong> table.</p>
</div>
<div class="paragraph">
<p>The letters <em>M</em>, <em>P</em> and/or <em>T</em> beside a function description indicate whether it is available
in the main context (<em>M</em>), in process contexts (<em>P</em>) and/or in thread contexts (<em>T</em>).
For example, <em>MP</em> means that the function is available in the main context and in process contexts, but
not in thread contexts.</p>
</div>
<div class="paragraph">
<p>On error, unless otherwise pointed out, all functions call Lua&#8217;s
<a href="http://www.lua.org/manual/5.3/manual.html#pdf-error">error</a>() with a string message handler.</p>
</div>
<div class="sect2">
<h3 id="_clients">Clients</h3>
<div class="paragraph">
<p><span class="small">Rfr: <a href="http://jackaudio.org/api/group__ClientFunctions.html">Creating &amp; manipulating clients</a>.</span></p>
</div>
<div id="jack.client_open" class="ulist">
<ul>
<li>
<p><em>client</em> = <strong>client_open</strong>( <em>name</em> [, <em>options</em>]) <em>M</em><br>
<span class="small">Creates a JACK client with the passed <em>name</em> and returns an opaque reference for subsequent
operations.
If the <em>options</em> parameter is passed, it must be a table containing zero or more of
the following elements:<br>
<strong>options.use_exact_name</strong> (boolean): if <em>true</em>, do not automatically assign a new name if <em>name</em> is already in use;<br>
<strong>options.no_start_server</strong> (boolean): if <em>true</em>, do not start the JACK server if not already running;<br>
<strong>options.server_name</strong> (string): select the JACK server with this name;<br>
<strong>options.session_id</strong> (string): pass this string as SessionID Token.</span></p>
</li>
</ul>
</div>
<div id="jack.client_name_size" class="ulist">
<ul>
<li>
<p><em>maxsize</em> = <strong>client_name_size</strong>( ) <em>M</em><br>
<span class="small">Returns the maximum allowed size for JACK clients names.</span></p>
</li>
</ul>
</div>
<div id="jack.client_close" class="ulist">
<ul>
<li>
<p><strong>client_close</strong>( <em>client</em> ) <em>M</em><br>
<span class="small">Closes a client previously opened with <a href="#_jack.client">jack.client</a>().</span></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Clients are automatically closed by LuaJack when the application exits.
</td>
</tr>
</table>
</div>
<div id="jack.client_name" class="ulist">
<ul>
<li>
<p><em>name</em> = <strong>client_name</strong>( <em>client</em> ) <em>M</em><br>
<span class="small">Returns the client&#8217;s name.</span></p>
</li>
</ul>
</div>
<div id="jack.client_uuid" class="ulist">
<ul>
<li>
<p><em>uuid</em> = <strong>client_uuid</strong>( <em>client</em> ) <em>M</em><br>
<span class="small">Returns the client&#8217;s UUID.</span></p>
</li>
</ul>
</div>
<div id="jack.client_uuid_to_name" class="ulist">
<ul>
<li>
<p><em>name</em> = <strong>client_uuid_to_name</strong>( <em>client</em>, <em>uuid</em> ) <em>M</em><br>
<span class="small">Returns the name of the client whose UUID is <em>uuid</em>,  or <em>nil</em> if no such client exists.</span></p>
</li>
</ul>
</div>
<div id="jack.client_name_to_uuid" class="ulist">
<ul>
<li>
<p><em>uuid</em> = <strong>client_name_to_uuid</strong>( <em>client</em>, <em>name</em> ) <em>M</em><br>
<span class="small">Returns the UUID of the client whose name is <em>name</em>,  or <em>nil</em> if no such client exists.</span></p>
</li>
</ul>
</div>
<div id="jack.activate" class="ulist">
<ul>
<li>
<p><strong>activate</strong>( <em>client</em> ) <em>M</em><br>
<span class="small">Activates <em>client</em>.</span></p>
</li>
</ul>
</div>
<div id="jack.deactivate" class="ulist">
<ul>
<li>
<p><strong>deactivate</strong>( <em>client</em> ) <em>M</em><br>
<span class="small">Deactivates <em>client</em>.</span></p>
</li>
</ul>
</div>
<div id="jack.is_realtime" class="ulist">
<ul>
<li>
<p><em>boolean</em> = <strong>is_realtime</strong>( <em>client</em> ) <em>M</em><br>
<span class="small">Returns <em>true</em> if JACK is running realtime, <em>false</em> otherwise.</span></p>
</li>
</ul>
</div>
<div id="jack.cpu_load" class="ulist">
<ul>
<li>
<p><em>cpuload</em> = <strong>cpu_load</strong>( <em>client</em> ) <em>MPT</em><br>
<span class="small">Returns the current CPU load estimated by JACK.</span></p>
</li>
</ul>
</div>
<div id="jack.sample_rate" class="ulist">
<ul>
<li>
<p><em>sample_rate</em> = <strong>sample_rate</strong>( <em>client</em> ) <em>MPT</em><br>
<span class="small">Returns the sample rate of the JACK system, as set by the user when the server was started.</span></p>
</li>
</ul>
</div>
<div id="jack.set_buffer_size" class="ulist">
<ul>
<li>
<p><strong>set_buffer_size</strong>( <em>client</em>, <em>nframes</em> ) <em>MP</em><br>
<span class="small">Changes the buffer size passed to the <a href="#jack.process_callback">process callback</a> to <em>nframes</em>.</span></p>
</li>
</ul>
</div>
<div id="jack.buffer_size" class="ulist">
<ul>
<li>
<p><em>nframes</em> = <strong>buffer_size</strong>( <em>client</em> ) <em>MPT</em><br>
<span class="small">Returns the current maximum buffer size that will ever be passed to the <a href="#jack.process_callback">process callback</a> (to be used only before the client is activated).</span></p>
</li>
</ul>
</div>
<div id="jack.freewheel" class="ulist">
<ul>
<li>
<p><strong>freewheel</strong>( <em>client</em>, <em>onoff</em> ) <em>MP</em><br>
<span class="small">Starts/stops JACK&#8217;s '<em>freewheel</em>' mode. The <em>onoff</em> argument is a string and may be <em>'on'</em> (to start) or <em>'off'</em> (to stop).</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_real_time_callbacks">Real-time callbacks</h3>
<div class="paragraph">
<p><span class="small">Rfr: <a href="http://jackaudio.org/api/group__ClientCallbacks.html">Setting Client Callbacks</a>.</span></p>
</div>
<div class="paragraph">
<p>Real-time callbacks are executed in the <a href="#luajack.contexts">process context</a>.
This context is to be created by the main script using
<a href="#jack.process_load">jack.process_load</a>()
or <a href="#jack.process_loadfile">jack.process_loadfile</a>()
before the client is activated.
The loaded Lua chunk is expected to define the callbacks and register them using the
functions described in this section, which are available only in the process context.</p>
</div>
<div id="jack.process_load" class="ulist">
<ul>
<li>
<p><strong>process_load</strong>( <em>client</em>, <em>chunk</em>, <em>&#8230;&#8203;</em> ) <em>M</em><br>
<span class="small">This function is to be used in the main context to create the
<a href="#luajack.contexts">process context</a> for <em>client</em>.<br>
The <em>chunk</em> argument is a string containing the Lua code to be executed in the
process context (the <strong>process chunk</strong>).<br>
Additional arguments in the <em>&#8230;&#8203;</em> variadic part, if any, are passed as arguments
to the chunk and may be of the following types only: <em>nil</em>, <em>boolean</em>, <em>number</em>,
and <em>string</em>. References to LuaJack objects are allowed, since their type is <em>number</em>.<br>
A <a href="#loading_luajack">limited LuaJack module</a> is automatically
pre-loaded in the process context, with the subset of JACK functionalities that
can be accessed directly by the process chunk.</span></p>
</li>
</ul>
</div>
<div id="jack.process_loadfile" class="ulist">
<ul>
<li>
<p><strong>process_loadfile</strong>( <em>client</em>, <em>filename</em>, <em>&#8230;&#8203;</em> ) <em>M</em><br>
<span class="small">Same as <a href="#jack.process_load">jack.process_load</a>(), with the only difference that it
loads the chunk from the file specified by <em>filename</em>. The file is searched for using
the same mechanism used by Lua&#8217;s
<a href="http://www.lua.org/manual/5.3/manual.html#pdf-require">require</a>()
to search for modules.</span></p>
</li>
</ul>
</div>
<div id="jack.process_callback" class="ulist">
<ul>
<li>
<p><strong>process_callback</strong>( <em>client</em>, <em>func</em> ) <em>P</em><br>
<span class="small">Registers <em>func</em> as 'process' callback (<em>func</em> must be realtime safe).<br>
The callback is executed as <strong><em>func(nframes)</em></strong>, where <em>nframes</em> is the number of frames to process.</span></p>
</li>
</ul>
</div>
<div id="jack.buffer_size_callback" class="ulist">
<ul>
<li>
<p><strong>buffer_size_callback</strong>( <em>client</em>, <em>func</em> ) <em>P</em><br>
<span class="small">Registers <em>func</em> as callback for the 'buffer size change' event.<br>
The callback is executed as <strong><em>func(nframes)</em></strong>, where <em>nframes</em> is the new
size of the JACK engine buffer.</span></p>
</li>
</ul>
</div>
<div id="jack.sync_callback" class="ulist">
<ul>
<li>
<p><strong>sync_callback</strong>( <em>client</em>, <em>func</em> ) <em>P</em><br>
<span class="small">Registers <em>client</em> as a
<a href="http://jackaudio.org/api/transport-design.html#slowsyncclients">slow-sync client</a>
and <em>func</em> as its <em>sync_callback</em>
(<em>func</em> must be realtime safe and is invoked just before the <em>process</em> callback).<br>
The callback is executed as <strong><em>func(state, position)</em></strong>, where the additional arguments
are the current transport <em>state</em> and <em>position</em>. It is expected to return <em>true</em> if the
client is ready to roll, or <em>false</em> (or <em>nil</em>) otherwise.</span></p>
</li>
</ul>
</div>
<div id="jack.timebase_callback" class="ulist">
<ul>
<li>
<p><strong>timebase_callback</strong>( <em>client</em>, <em>func</em> [, <em>conditional</em>] ) <em>P</em><br>
<span class="small">Registers <em>client</em> as the
<a href="http://jackaudio.org/api/transport-design.html#timebase">timebase master</a>
and <em>func</em> as its <em>timebase callback</em>
(<em>func</em> must be realtime safe because and is invoked just after the <em>process</em> callback).
If another client is already registered as timebase master, this client will take over
unless the optional <em>conditional</em> argument (a boolean) is passed with the value <em>true</em>.<br>
The callback is executed as <strong><em>func(state, nframes, position, new_position)</em></strong>, where
the additional arguments are the current transport <em>state</em>, the current transport <em>position</em>,
and a boolean <em>new_position</em> having the value <em>true</em> for a newly requested position (which the
<em>client</em> should provide using <a href="#jack.transport_reposition">jack.transport_reposition</a>() and
<a href="#jack.transport_locate">jack.transport_locate</a>()).</span></p>
</li>
</ul>
</div>
<div id="jack.release_timebase" class="ulist">
<ul>
<li>
<p><strong>release_timebase</strong>( <em>client</em> ) <em>P</em><br>
<span class="small">Used by the client previously registered as the timebase master to withdraw that role
and unregister the timebase callback.</span></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Real-time considerations</strong></p>
</div>
<div class="paragraph">
<p>The process chunk passed to <a href="#jack.process_load">jack.process_load</a>()
or <a href="#jack.process_loadfile">jack.process_loadfile</a>() is actually loaded in an hybrid context,
in that its main part is executed in the Lua state of the process context while still in the
non-rt pthread of the main context (the rt-pthread will be created by JACK later and does not
yet exist at the time the process chunk is loaded).
This means that it can perform non real-time safe operations, e.g. pre-allocate large
tables for samples storage.
On the other side, the rt-callbacks that the chunk registers will be executed in the pure
process context, and thus they should be real-time safe.</p>
</div>
<div class="paragraph">
<p>Note also that Lua is a garbage-collected language with automatic memory management.
This implies that the execution of Lua callbacks potentially involves calls to functions
which are not real-time safe (e.g. malloc() and friends) and that, if not adeguately
controlled, the GC may kick in at any time in the real-time pthread.</p>
</div>
<div class="paragraph">
<p>To mitigate the GC problem, LuaJack disables garbage collection in the Lua state of
the process context, and automatically executes a
<a href="http://www.lua.org/manual/5.3/manual.html#pdf-collectgarbage">basic garbage-collection step</a>
(with size=0) at the end of each rt-callback. This should suffice as long as the
rt-callbacks do not allocate lots of memory (which would be a bad idea&#8230;&#8203;).</p>
</div>
<div class="paragraph">
<p>Calls to malloc() and friends should not be a problem as long as they do not result
in page faults. This can be accomplished first of all by avoiding the creation of large
temporary objects (e.g. tables) in the rt-callbacks, and by pre-allocating them in the
main part of the process chunk, instead.</p>
</div>
<div class="paragraph">
<p>As an additional measure one could use, via LD_PRELOAD, a custom malloc() implementation
that does not return memory to the system
(for example, <a href="https://code.google.com/p/ltalloc/">ltalloc</a>),
and allocate+release 'enough' memory at the beginning of the program execution so that
the allocator can serve subsequent memory requests without asking additional memory to
the system.</p>
</div>
<div class="paragraph">
<p><em>(The real-time aspects of LuaJack are, however, still under study so take the above
considerations with salt).</em></p>
</div>
</div>
<div class="sect2">
<h3 id="_non_real_time_callbacks">Non real-time callbacks</h3>
<div class="paragraph">
<p><span class="small">Rfr: <a href="http://jackaudio.org/api/group__ClientCallbacks.html">Setting Client Callbacks</a>.</span></p>
</div>
<div class="paragraph">
<p>The functions listed here are available only in the <a href="#luajack.contexts">main context</a>
and can be used to register (Lua) callbacks for JACK events other than those that are
handled in the real-time audio processing thread.</p>
</div>
<div class="paragraph">
<p>The registered callbacks are also executed by LuaJack in the main context. Notice
that each callback receives the affected <em>client</em> as its first argument (this is
because the main context is shared by all the clients created by the LuaJack application).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
All the non real-time Lua callbacks described here are executed by LuaJack in
the main pthread. JACK itself may execute its C callbacks in different pthreads; this
is a libjack implementation choice and may differ across different implementations as
well as platforms. When JACK executes a C callback, LuaJack saves the event associated
with it and promptly returns. The event is then translated in a Lua callback in the
main pthread.
</td>
</tr>
</table>
</div>
<div id="jack.shutdown_callback" class="ulist">
<ul>
<li>
<p><strong>shutdown_callback</strong>( <em>client</em>, <em>func</em> ) <em>M</em><br>
<span class="small">Registers <em>func</em> as callback for the 'shutdown' event.<br>
The callback is executed as <strong><em>func(client, code, reason)</em></strong>, where <em>code</em> is a string
version of the JackStatus flags and <em>reason</em> is a string describing the shutdown reason.
The callback need not be implemented as a signal handler (it may print, release resources
etc.).</span></p>
</li>
</ul>
</div>
<div id="jack.freewheel_callback" class="ulist">
<ul>
<li>
<p><strong>freewheel_callback</strong>( <em>client</em>, <em>func</em> ) <em>M</em><br>
<span class="small">Registers <em>func</em> as callback for the 'starting or stopping freewheel mode' event.<br>
The callback is executed as <strong><em>func(client, operation)</em></strong>, where <em>operation</em> is a string
that may be either <em>'starting'</em> or <em>'stopping'</em>.</span></p>
</li>
</ul>
</div>
<div id="jack.sample_rate_callback" class="ulist">
<ul>
<li>
<p><strong>sample_rate_callback</strong>( <em>client</em>, <em>func</em> ) <em>M</em><br>
<span class="small">Registers <em>func</em> as callback for the 'sample rate change' event.<br>
The callback is executed as <strong><em>func(client, nframes)</em></strong>, where <em>nframes</em> is the new
sample rate.</span></p>
</li>
</ul>
</div>
<div id="jack.client_registration_callback" class="ulist">
<ul>
<li>
<p><strong>client_registration_callback</strong>( <em>client</em>, <em>func</em> ) <em>M</em><br>
<span class="small">Registers <em>func</em> as callback for the 'client (de)registration' event.<br>
The callback is executed as <strong><em>func(client, name, operation)</em></strong>, where <em>name</em> is the name
of the affected client and <em>operation</em> is a string that may be either <em>'registered'</em>
or <em>'unregistered'</em>.</span></p>
</li>
</ul>
</div>
<div id="jack.port_registration_callback" class="ulist">
<ul>
<li>
<p><strong>port_registration_callback</strong>( <em>client</em>, <em>func</em> ) <em>M</em><br>
<span class="small">Registers <em>func</em> as callback for the 'port (de)registration' event.<br>
The callback is executed as <strong><em>func(client, portname, operation)</em></strong>, where <em>portname</em> is
the (full) name of the affected port and <em>operation</em> is a string that may be
either <em>'registered'</em> or <em>'unregistered'</em>.</span></p>
</li>
</ul>
</div>
<div id="jack.port_rename_callback" class="ulist">
<ul>
<li>
<p><strong>port_rename_callback</strong>( <em>client</em>, <em>func</em> ) <em>M</em><br>
<span class="small">Registers <em>func</em> as callback for the 'port rename' event.<br>
The callback is executed as <strong><em>func(client, portname, newname)</em></strong>, where <em>portname</em> is
the old (full) name of the affected port and <em>newname</em> is its newly assigned name.</span></p>
</li>
</ul>
</div>
<div id="jack.port_connect_callback" class="ulist">
<ul>
<li>
<p><strong>port_connect_callback</strong>( <em>client</em>, <em>func</em> ) <em>M</em><br>
<span class="small">Registers <em>func</em> as callback for the 'ports connect or disconnect' event.<br>
The callback is executed as <strong><em>func(client, srcname, dstname, operation)</em></strong>, where
<em>srcname</em> and <em>dstname</em> are the (full) names of the affected ports, and <em>operation</em>
is a string that may be either <em>'connected'</em> or <em>'disconnected'</em>.</span></p>
</li>
</ul>
</div>
<div id="jack.graph_order_callback" class="ulist">
<ul>
<li>
<p><strong>graph_order_callback</strong>( <em>client</em>, <em>func</em> ) <em>M</em><br>
<span class="small">Registers <em>func</em> as callback for the 'graph reorder' event.<br>
The callback is executed as <strong><em>func(client)</em></strong>.</span></p>
</li>
</ul>
</div>
<div id="jack.xrun_callback" class="ulist">
<ul>
<li>
<p><strong>xrun_callback</strong>( <em>client</em>, <em>func</em> ) <em>M</em><br>
<span class="small">Registers <em>func</em> as callback for the 'xrun' event.<br>
The callback is executed as <strong><em>func(client)</em></strong>.</span></p>
</li>
</ul>
</div>
<div id="jack.latency_callback" class="ulist">
<ul>
<li>
<p><strong>latency_callback</strong>( <em>client</em>, <em>func</em> ) <em>M</em><br>
<span class="small">Registers <em>func</em> as callback for the 'latency recomputations needed' event.<br>
The callback is executed as <strong><em>func(client, mode)</em></strong>, where <em>mode</em> is a string that
may be either <em>'capture'</em> or <em>'playback'</em>.</span></p>
</li>
</ul>
</div>
<div id="jack.session_callback" class="ulist">
<ul>
<li>
<p><strong>session_callback</strong>( <em>client</em>, <em>func</em> ) <em>M</em><br>
<span class="small">Registers <em>func</em> as callback for the 'session notification' event.<br>
The callback is executed as
<strong><em>command, flag1, flag2 = func(client, type, path, uuid)</em></strong>,
where:<br>
<em>type</em> (a string) is the type of this session event and may be one of <em>'save'</em>,
<em>'save_and_quit'</em> or <em>'save_template'</em>;<br>
<em>path</em> (a string) is the session directory path;<br>
<em>uuid</em> (a string) is the client UUID which must be used when opening the client.<br>
The callback is expected to return the following values, which are used by LuaJack to
reply to the event:<br>
<em>command</em>: the command line (a string) needed to restore the client;<br>
<em>flag1</em>, <em>flag2</em>: optional session flags (<em>'save_error'</em> and/or <em>'need_terminal'</em>).</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_client_threads">Client threads</h3>
<div class="paragraph">
<p><span class="small">Rfr: <a href="http://jackaudio.org/api/group__ClientThreads.html">Creating and managing client threads</a>.</span></p>
</div>
<div id="jack.thread_load" class="ulist">
<ul>
<li>
<p><em>thread</em> = <strong>thread_load</strong>( <em>client</em>, <em>chunk</em>, <em>&#8230;&#8203;</em> ) <em>M</em><br>
<span class="small">Creates a client thread with its dedicated <a href="#luajack.contexts">thread context</a> and
returns a reference for subsequent operations.
The <em>chunk</em> argument is a string containing the Lua code to be executed in the
thread.
Additional arguments in the variadic part (<em>&#8230;&#8203;</em>), if any, are passed as arguments
to the chunk and may be of the following types only: <em>nil</em>, <em>boolean</em>, <em>number</em>, <em>string</em>
(references to LuaJack objects are allowed, since their type is <em>number</em>).<br>
A <a href="#loading_luajack">limited LuaJack module</a> is automatically
pre-loaded in the thread context, with the subset of JACK functionalities that
can be accessed directly by the thread chunk.</span></p>
</li>
</ul>
</div>
<div id="jack.thread_loadfile" class="ulist">
<ul>
<li>
<p><em>thread</em> = <strong>thread_loadfile</strong>( <em>client</em>, <em>filename</em>, <em>&#8230;&#8203;</em> ) <em>M</em><br>
<span class="small">Same as <a href="#jack.thread_load">jack.thread_load</a>(), with the only difference that it
loads the chunk from the file specified by <em>filename</em>. The file is searched for using
the same mechanism used by Lua&#8217;s
<a href="http://www.lua.org/manual/5.3/manual.html#pdf-require">require</a>()
to search for modules.</span></p>
</li>
</ul>
</div>
<div id="jack.self" class="ulist">
<ul>
<li>
<p><em>client</em>, <em>thread</em> = <strong>self</strong>( ) <em>T</em><br>
<span class="small">Returns the client and thread references of the calling thread.
This function is available only to thread chunks (i.e. in thread contexts).</span></p>
</li>
</ul>
</div>
<div id="jack.signal" class="ulist">
<ul>
<li>
<p><strong>signal</strong>( <em>client</em>, <em>thread</em> ) <em>MPT</em><br>
<span class="small">Signals the pthread condition variable associated with <em>thread</em>.</span></p>
</li>
</ul>
</div>
<div id="jack.wait" class="ulist">
<ul>
<li>
<p><strong>wait</strong>( ) <em>T</em><br>
<span class="small">Waits on the pthread condition variable associated with the calling thread.
This function is available only to thread chunks (i.e. in thread contexts).</span></p>
</li>
</ul>
</div>
<div id="jack.testcancel" class="ulist">
<ul>
<li>
<p><strong>testcancel</strong>( ) <em>T</em><br>
<span class="small">Creates a cancellation point in the calling thread.
This function is available only to thread chunks (i.e. in thread contexts).</span></p>
</li>
</ul>
</div>
<div id="jack.real_time_priority" class="ulist">
<ul>
<li>
<p><em>priority</em> = <strong>real_time_priority</strong>( <em>client</em> ) <em>MPT</em><br>
<span class="small">If JACK is running with realtime priority, returns the priority that any thread
created by JACK will run at. Otherwise it returns <em>nil</em>.</span></p>
</li>
</ul>
</div>
<div id="jack.max_real_time_priority" class="ulist">
<ul>
<li>
<p><em>priority</em> = <strong>max_real_time_priority</strong>( <em>client</em> ) <em>MPT</em><br>
<span class="small">If JACK is running with realtime priority, returns the maximum priority that a
realtime client thread should use. Otherwise it returns <em>nil</em>.</span></p>
</li>
</ul>
</div>
<div id="jack.acquire_real_time_scheduling" class="ulist">
<ul>
<li>
<p><strong>acquire_real_time_scheduling</strong>( <em>priority</em> ) <em>MPT</em><br>
<span class="small">Enables realtime scheduling, with the specified <em>priority</em>, for the calling thread.</span></p>
</li>
</ul>
</div>
<div id="jack.drop_real_time_scheduling" class="ulist">
<ul>
<li>
<p><strong>drop_real_time_scheduling</strong>( ) <em>MPT</em><br>
<span class="small">Drops realtime scheduling for the calling thread.</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ports">Ports</h3>
<div class="paragraph">
<p><span class="small">Rfr: <a href="http://jackaudio.org/api/group__PortFunctions.html">Creating &amp; manipulating ports</a> - <a href="http://jackaudio.org/api/group__PortSearching.html">Looking up ports</a>.</span></p>
</div>
<div class="paragraph">
<p>Instead of a single port_register() function, LuaJack provides a few functions to
create ports depending on the desired direction (<em>input</em> or <em>output</em>) and port type
(default <em>audio</em>, default <em>midi</em>, or <em>custom</em>, i.e. not built-in).
These port-creating functions are listed below, followed by the functions for port handling.</p>
</div>
<div class="paragraph">
<p>Notice that most of the port-handling functions are available in two versions:
the version named <strong>jack.port_xxx</strong> acts on a port by reference, is usually faster
because it does not involve querying the server to resolve the port name, but can be
used only in the application that created the port; the version named <strong>jack.nport_xxx</strong>,
on the other side, is slower because it acts on the port by its name, but it can be used
also on ports not created by the invoking application.</p>
</div>
<div id="jack.input_audio_port" class="ulist">
<ul>
<li>
<p><em>port</em> = <strong>input_audio_port</strong>( <em>client</em> , <em>name</em> [, <em>options</em> ] ) <em>M</em><br>
<span class="small">Creates an input port of the default audio type for <em>client</em> and returns a reference
for subsequent operations.<br>
The mandatory <em>name</em> argument (a string) is the short name to be assigned to the port, while
the <em>options</em> parameter, if present, must be a table with zero or more of the following
elements:<br>
<strong>options.is_physical</strong> (boolean): JackPortIsPhysical flag;<br>
<strong>options.can_monitor</strong> (boolean): JackPortCanMonitor flag;<br>
<strong>options.is_terminal</strong> (boolean): JackPortIsTerminal flag.</span></p>
</li>
</ul>
</div>
<div id="jack.output_audio_port" class="ulist">
<ul>
<li>
<p><em>port</em> = <strong>output_audio_port</strong>( <em>client</em> , <em>name</em> [, <em>options</em> ] ) <em>M</em><br>
<span class="small">Creates an output port of the default audio type
for <em>client</em> and returns a reference for subsequent operations.<br>
The meaning of the arguments is the same as for <a href="#jack.input_audio_port">jack.input_audio_port</a>().</span></p>
</li>
</ul>
</div>
<div id="jack.input_midi_port" class="ulist">
<ul>
<li>
<p><em>port</em> = <strong>input_midi_port</strong>( <em>client</em> , <em>name</em> [, <em>options</em> ] ) <em>M</em><br>
<span class="small">Creates an input port of the default MIDI type
for <em>client</em> and returns a reference for subsequent operations.<br>
The meaning of the arguments is the same as for <a href="#jack.input_audio_port">jack.input_audio_port</a>().</span></p>
</li>
</ul>
</div>
<div id="jack.output_midi_port" class="ulist">
<ul>
<li>
<p><em>port</em> = <strong>output_midi_port</strong>( <em>client</em> , <em>name</em> [, <em>options</em> ] ) <em>M</em><br>
<span class="small">Creates an output port of the default MIDI type
for <em>client</em> and returns a reference for subsequent operations.<br>
The meaning of the arguments is the same as for <a href="#jack.input_audio_port">jack.input_audio_port</a>().</span></p>
</li>
</ul>
</div>
<div id="jack.input_custom_port" class="ulist">
<ul>
<li>
<p><em>port</em> = <strong>input_custom_port</strong>( <em>client</em> , <em>name</em> [, <em>options</em> ] ) <em>M</em><br>
<span class="small">Not available yet.</span></p>
</li>
</ul>
</div>
<div id="jack.output_custom_port" class="ulist">
<ul>
<li>
<p><em>port</em> = <strong>output_custom_port</strong>( <em>client</em> , <em>name</em> [, <em>options</em> ] ) <em>M</em><br>
<span class="small">Not available yet.</span></p>
</li>
</ul>
</div>
<div id="jack.port_name_size" class="ulist">
<ul>
<li>
<p><em>maxsize</em> = <strong>port_name_size</strong>( ) <em>M</em><br>
<span class="small">Returns the maximum allowed size for JACK port names.</span></p>
</li>
</ul>
</div>
<div id="jack.port_type_size" class="ulist">
<ul>
<li>
<p><em>maxsize</em> = <strong>port_type_size</strong>( ) <em>M</em><br>
<span class="small">Returns the maximum allowed size for JACK port types.</span></p>
</li>
</ul>
</div>
<div id="jack.port_unregister" class="ulist">
<ul>
<li>
<p><strong>port_unregister</strong>( <em>port</em> ) <em>M</em><br>
<span class="small">Unregisters and deletes <em>port</em>.</span></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
A port is automatically unregistered by LuaJack when the client that created it is
<a href="#jack.client_close">closed</a>.
</td>
</tr>
</table>
</div>
<div id="jack.connect" class="ulist">
<ul>
<li>
<p><strong>port_connect</strong>( <em>port</em>, <em>portname2</em> ) <em>M</em><br>
<strong>nport_connect</strong>( <em>client</em>, <em>portname1</em>, <em>portname2</em> ) alias <strong>connect</strong> <em>M</em><br>
<span class="small">Connects two ports. One of the two ports must be an output port (source of the connection)
and the other must be an input port (destination). The two ports can be passed in any order.</span></p>
</li>
</ul>
</div>
<div id="jack.disconnect" class="ulist">
<ul>
<li>
<p><strong>port_disconnect</strong>( <em>port</em> [, <em>portname2</em>] ) <em>M</em><br>
<strong>nport_disconnect</strong>( <em>client</em>, <em>portname1</em> [, <em>portname2</em>] )  alias <strong>disconnect</strong> <em>M</em><br>
<span class="small">Disconnects two ports.
If <em>portname2</em> is <em>nil</em>, the first port is disconnected from all the ports it is connected to.</span></p>
</li>
</ul>
</div>
<div id="jack.port_name" class="ulist">
<ul>
<li>
<p><em>fullname</em> = <strong>port_name</strong>( <em>port</em> ) <em>M</em><br>
<span class="small">Returns the port&#8217;s full name.</span></p>
</li>
</ul>
</div>
<div id="jack.port_short_name" class="ulist">
<ul>
<li>
<p><em>shortname</em> = <strong>port_short_name</strong>( <em>port</em> ) <em>M</em><br>
<span class="small">Returns the port&#8217;s short name.</span></p>
</li>
</ul>
</div>
<div id="jack.port_flags" class="ulist">
<ul>
<li>
<p><em>flags</em>, <em>table</em> = <strong>port_flags</strong>( <em>port</em> ) <em>M</em><br>
<em>flags</em>, <em>table</em> = <strong>nport_flags</strong>( <em>client</em>, <em>portname</em> ) <em>M</em><br>
<span class="small">Returns the port&#8217;s flags, in two equivalent formats:<br>
<strong>flags</strong> : a string concatenating the flags that apply to the port, and<br>
<strong>table</strong>: a table where <em>table.&lt;flag&gt;</em> is <em>true</em> if <em>&lt;flag&gt;</em> applies to the port,
or <em>nil</em> otherwise.<br>
(<em>&lt;flag&gt;</em> = <em>'input'</em> | <em>'output'</em> | <em>'audio'</em> | <em>'midi'</em> | <em>'custom'</em> |
<em>'is_physical'</em> | <em>'can_monitor'</em> | <em>'is_terminal'</em> )</span></p>
</li>
</ul>
</div>
<div id="jack.port_uuid" class="ulist">
<ul>
<li>
<p><em>uuid</em> = <strong>port_uuid</strong>( <em>port</em> ) <em>M</em><br>
<em>uuid</em> = <strong>nport_uuid</strong>( <em>client</em>, <em>portname</em> ) <em>M</em><br>
<span class="small">Returns the port&#8217;s UUID (a string), or <em>nil</em> if not found.</span></p>
</li>
</ul>
</div>
<div id="jack.port_type" class="ulist">
<ul>
<li>
<p><em>type</em> = <strong>port_type</strong>( <em>port</em> ) <em>M</em><br>
<em>type</em> = <strong>nport_type</strong>( <em>client</em>, <em>portname</em> ) <em>M</em><br>
<span class="small">Returns the port&#8217;s type (a string), or <em>nil</em> if not found.</span></p>
</li>
</ul>
</div>
<div id="jack.nport_exists" class="ulist">
<ul>
<li>
<p><em>boolean</em> = <strong>nport_exists</strong>( <em>client</em>, <em>portname</em> ) <em>M</em><br>
<span class="small">Returns <em>true</em> if the port with the full named <em>portname</em> exists, otherwise it returns <em>false</em>.</span></p>
</li>
</ul>
</div>
<div id="jack.port_is_mine" class="ulist">
<ul>
<li>
<p><em>boolean</em> = <strong>port_is_mine</strong>( <em>client</em>, <em>port</em> ) <em>M</em><br>
<em>boolean</em> = <strong>nport_is_mine</strong>( <em>client</em>, <em>portname</em> ) <em>M</em><br>
<span class="small">Returns <em>true</em> if the port is owned by the invoking <em>client</em>, otherwise it returns <em>false</em>.</span></p>
</li>
</ul>
</div>
<div id="jack.port_set_alias" class="ulist">
<ul>
<li>
<p><strong>port_set_alias</strong>( <em>port</em>, <em>alias</em> ) <em>M</em><br>
<strong>nport_set_alias</strong>( <em>client</em>, <em>portname</em>, <em>alias</em> ) <em>M</em><br>
<span class="small">Sets <em>alias</em> as an alias for the port.</span></p>
</li>
</ul>
</div>
<div id="jack.port_unset_alias" class="ulist">
<ul>
<li>
<p><strong>port_unset_alias</strong>( <em>port</em>, <em>alias</em> ) <em>M</em><br>
<strong>nport_unset_alias</strong>( <em>client</em>, <em>portname</em>, <em>alias</em> ) <em>M</em><br>
<span class="small">Unsets <em>alias</em> as an alias for the port.</span></p>
</li>
</ul>
</div>
<div id="jack.port_aliases" class="ulist">
<ul>
<li>
<p><em>alias1</em>, <em>alias2</em> = <strong>port_aliases</strong>( <em>port</em> ) <em>M</em><br>
<em>alias1</em>, <em>alias2</em> = <strong>nport_aliases</strong>( <em>client</em>, <em>portname</em> ) <em>M</em><br>
<span class="small">Returns the aliases for the port (if it has any).</span></p>
</li>
</ul>
</div>
<div id="jack.port_connections" class="ulist">
<ul>
<li>
<p><em>N</em>, <em>{ portname1, &#8230;&#8203;, portnameN }</em> = <strong>port_connections</strong>( <em>port</em> [, <em>list</em> ] ) <em>M</em><br>
<em>N</em>, <em>{ portname1, &#8230;&#8203;, portnameN }</em> = <strong>nport_connections</strong>( <em>client</em>, <em>portname</em> [, <em>list</em> ] ) <em>M</em><br>
<span class="small">Returns the number of connections the port is involved in. If <em>list = true</em>, it returns also
a table containing the full names of the ports the port is connected to.</span></p>
</li>
</ul>
</div>
<div id="jack.port_connected" class="ulist">
<ul>
<li>
<p><em>boolean</em> = <strong>port_connected</strong>( <em>port</em>, <em>portname2</em> ) <em>M</em><br>
<em>boolean</em> = <strong>nport_connected</strong>( <em>client</em>, <em>portname1</em>, <em>portname2</em> ) <em>M</em><br>
<span class="small">Returns <em>true</em> if the two ports are connected, <em>false</em> otherwise.</span></p>
</li>
</ul>
</div>
<div id="jack.port_monitor" class="ulist">
<ul>
<li>
<p><strong>port_monitor</strong>( <em>port</em>, <em>onoff</em> ) <em>M</em><br>
<strong>nport_monitor</strong>( <em>client</em>, <em>portname</em>, <em>onoff</em> ) <em>M</em><br>
<span class="small">Turns input monitoring on or off for the port (implemented with jack_port_ensure_monitor()).
The <em>onoff</em> argument is a string and may be <em>'on'</em> or <em>'off</em>.</span></p>
</li>
</ul>
</div>
<div id="jack.port_monitoring" class="ulist">
<ul>
<li>
<p><em>boolean</em> = <strong>port_monitoring</strong>( <em>port</em> ) <em>M</em><br>
<em>boolean</em> = <strong>nport_monitoring</strong>( <em>client</em>, <em>portname</em> ) <em>M</em><br>
<span class="small">Returns <em>true</em> if input monitoring has been requested for the port, <em>false</em> otherwise
or if no port with this name was found.</span></p>
</li>
</ul>
</div>
<div id="jack.get_ports" class="ulist">
<ul>
<li>
<p><em>{ portname1, &#8230;&#8203;, portnameN }</em> = <strong>get_ports</strong>( <em>client</em> [, <em>filter</em> ]) <em>M</em><br>
<span class="small">Returns a list (table) of full port names. If <em>filter</em> is <em>nil</em>, all the ports are listed,
otherwise the ports are selected according to the <em>filter</em> parameter, which must be a table
containing zero or more of the following optional elements:<br>
<strong>filter.name_pattern</strong>: a regular expression (string) used to select ports by name;<br>
<strong>filter.type_pattern</strong>: a regular expression (string) used to select ports by type;<br>
<strong>filter.direction</strong>: a string that may be <em>'input'</em> or <em>'output'</em>, to select input ports only<br>
or output ports only, respectively;<br>
<strong>filter.is_physical</strong> (boolean): if <em>true</em>, list only physical ports;<br>
<strong>filter.can_monitor</strong> (boolean): if <em>true</em>, list only ports that can monitor;<br>
<strong>filter.is_terminal</strong> (boolean): if <em>true</em>, list only terminal ports.</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_latency">Latency</h3>
<div class="paragraph">
<p><span class="small">Rfr: <a href="http://jackaudio.org/api/group__LatencyFunctions.html">Managing and determining Latency</a></span></p>
</div>
<div id="jack.latency_range" class="ulist">
<ul>
<li>
<p><em>min</em>, <em>max</em> = <strong>latency_range</strong>( <em>port</em>, <em>mode</em> ) <em>M</em><br>
<span class="small">Gets the minimum and maximum latencies (in frames) defined by <em>mode</em> for the port.
The <em>mode</em> parameter (a string) may be <em>'capture'</em> or <em>'playback'</em>.</span></p>
</li>
</ul>
</div>
<div id="jack.set_latency_range" class="ulist">
<ul>
<li>
<p><strong>set_latency_range</strong>( <em>port</em>, <em>mode</em>, <em>min</em>, <em>max</em> ) <em>M</em><br>
<span class="small">Sets the minimum and maximum latencies (in frames) defined by <em>mode</em> for <em>port</em>.
The <em>mode</em> parameter (a string) may be <em>'capture'</em> or <em>playback</em>.
This function should only be used inside a <a href="#jack.latency_callback">latency callback</a>.</span></p>
</li>
</ul>
</div>
<div id="jack.recompute_total_latencies" class="ulist">
<ul>
<li>
<p><strong>recompute_total_latencies</strong>( <em>client</em> ) <em>M</em><br>
<span class="small">Requests a complete recomputation of all port latencies.</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_time">Time</h3>
<div class="paragraph">
<p><span class="small">Rfr: <a href="http://jackaudio.org/api/group__TimeFunctions.html">Handling time</a></span></p>
</div>
<div id="jack.time" class="ulist">
<ul>
<li>
<p><em>useconds</em> = <strong>time</strong>( ) <em>MPT</em><br>
<span class="small">Returns JACK&#8217;s current system time in microseconds.</span></p>
</li>
</ul>
</div>
<div id="jack.frame" class="ulist">
<ul>
<li>
<p><em>frameno</em> = <strong>frame</strong>( <em>client</em> ) alias <strong>frame_time</strong><br>
<span class="small">Returns the estimated current time in frames (to be used outside the process callback).</span></p>
</li>
</ul>
</div>
<div id="jack.since" class="ulist">
<ul>
<li>
<p><em>elapsed</em> = <strong>since</strong>( <em>useconds</em> ) <em>MPT</em><br>
<span class="small">Returns the time, in microseconds, elapsed since JACK&#8217;s system time <em>useconds</em>.</span></p>
</li>
</ul>
</div>
<div id="jack.since_frame" class="ulist">
<ul>
<li>
<p><em>nframes</em> = <strong>since_frame</strong>( <em>client</em>, <em>frameno</em> ) <em>MPT</em><br>
<span class="small">Returns the number of frames elapsed since the estimated time <em>frameno</em>, in frames
(to be used outside the process callback).</span></p>
</li>
</ul>
</div>
<div id="jack.frames_to_time" class="ulist">
<ul>
<li>
<p><em>useconds</em> = <strong>frames_to_time</strong>( <em>client</em>, <em>nframes</em> ) <em>MPT</em><br>
<span class="small">Returns the estimated time in microseconds of the specified time in frames.</span></p>
</li>
</ul>
</div>
<div id="jack.time_to_frames" class="ulist">
<ul>
<li>
<p><em>nframes</em> = <strong>time_to_frames</strong>( <em>client</em>, <em>useconds</em> ) <em>MPT</em><br>
<span class="small">Returns the estimated time in frames of the specified time in microseconds.</span></p>
</li>
</ul>
</div>
<div id="jack.frames_since_cycle_start" class="ulist">
<ul>
<li>
<p><em>nframes</em> = <strong>frames_since_cycle_start</strong>( <em>client</em> ) <em>MPT</em><br>
<span class="small">Returns the estimated time in frames that has passed since the JACK server began the
current process cycle.</span></p>
</li>
</ul>
</div>
<div id="jack.last_frame_time" class="ulist">
<ul>
<li>
<p><em>nframes</em> = <strong>last_frame_time</strong>( <em>client</em> ) <em>P</em><br>
<span class="small">Returns the time, in frames, at the start of the current process cycle.
Available in the process callback only, to be used to interpret timestamps generated with
<a href="#jack.frame">jack.frame</a>() in other threads.</span></p>
</li>
</ul>
</div>
<div id="jack.cycle_times" class="ulist">
<ul>
<li>
<p><em>current_frames</em>, <em>current_usecs</em>, <em>next_usecs</em>, <em>period_usecs</em> = <strong>cycle_times</strong>( <em>client</em> ) <em>P</em><br>
<span class="small">Available in the process callback only, returns internal cycle timing information
(refer to <a href="http://jackaudio.org/api/group__TimeFunctions.html">jack_get_cycle_time</a>()
in the JACK documentation for more details).</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_transport_and_timebase">Transport and timebase</h3>
<div class="paragraph">
<p><span class="small">Rfr: <a href="http://jackaudio.org/api/group__TransportControl.html">Transport and Timebase control</a> -
<a href="http://jackaudio.org/api/transport-design.html">JACK Transport Design</a>.</span></p>
</div>
<div id="jack.current_transport_frame" class="ulist">
<ul>
<li>
<p><em>frameno</em> = <strong>current_transport_frame</strong>( <em>client</em> ) <em>MPT</em><br>
<span class="small">Returns an estimate of the current transport frame.</span></p>
</li>
</ul>
</div>
<div id="jack.transport_state" class="ulist">
<ul>
<li>
<p><em>state</em> = <strong>transport_state</strong>( <em>client</em> ) <em>MPT</em><br>
<span class="small">Returns the current transport <em>state</em> (a string that may have one of the following values:
<em>'starting'</em>, <em>'rolling'</em>, or <em>'stopping'</em>).</span></p>
</li>
</ul>
</div>
<div id="jack.transport_query" class="ulist">
<ul>
<li>
<p><em>state</em>, <em>position</em> = <strong>transport_query</strong>( <em>client</em> ) <em>MPT</em><br>
<span class="small">Returns the current transport <em>state</em> (see <a href="#jack.transport_state">jack.transport_state</a>())
and the current transport <em>position</em>.<br>
The transport position is a Lua-table representation of the
<a href="http://jackaudio.org/api/structjack__position__t.html">jack_position_t</a> struct.
Its elements have the same name and meaning as the fields of the struct, except for the
<em>valid</em> field, which in the table representation is not used (optional elements which
are not present are set to <em>nil</em>, i.e. not set at all).</span></p>
</li>
</ul>
</div>
<div id="jack.transport_start" class="ulist">
<ul>
<li>
<p><strong>transport_start</strong>( <em>client</em> ) <em>MPT</em><br>
<span class="small">Starts the JACK transport rolling.</span></p>
</li>
</ul>
</div>
<div id="jack.transport_stop" class="ulist">
<ul>
<li>
<p><strong>transport_stop</strong>( <em>client</em> ) <em>MPT</em><br>
<span class="small">Stops the JACK transport rolling.</span></p>
</li>
</ul>
</div>
<div id="jack.transport_locate" class="ulist">
<ul>
<li>
<p><strong>transport_locate</strong>( <em>client</em>, <em>frameno</em> ) <em>MPT</em><br>
<span class="small">Repositions the JACK transport to the frame number <em>frameno</em>
(realtime safe, may be used in the <a href="#jack.timebase_callback">timebase callback</a>).</span></p>
</li>
</ul>
</div>
<div id="jack.transport_reposition" class="ulist">
<ul>
<li>
<p><strong>transport_reposition</strong>( <em>client</em>, <em>position</em> ) <em>MPT</em><br>
<span class="small">Request a new transport <em>position</em>
(realtime safe, may be used in the <a href="#jack.timebase_callback">timebase callback</a>).</span></p>
</li>
</ul>
</div>
<div id="jack.set_sync_timeout" class="ulist">
<ul>
<li>
<p><strong>set_sync_timeout</strong>( <em>client</em>, <em>timeout</em> ) <em>MPT</em><br>
<span class="small">Sets the <em>timeout</em> value (in microseconds) for
<a href="http://jackaudio.org/api/transport-design.html#slowsyncclients">slow-sync clients</a>.</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_reading_and_writing_audio_data">Reading and writing audio data</h3>
<div class="paragraph">
<p>The functions described in this section are available only in the
<a href="#jack.process_callback">process callback</a>, and allow to read and write
samples from/to ports of the default audio type.</p>
</div>
<div class="paragraph">
<p>For this type of ports, a sample is represented by a Lua number.</p>
</div>
<div id="audiojack.get_buffer" class="ulist">
<ul>
<li>
<p><em>nframes</em> = <strong>get_buffer</strong>( <em>port</em> ) <em>P</em><br>
<span class="small">Retrieves the port buffer and initializes the buffer&#8217;s <em>current position</em> to the first
sample.<br>
Returns the buffer size in samples (which is the same value as the <em>nframes</em>
parameter passed to the process callback).<br>
This function must be invoked in the <a href="#jack.process_callback">process callback</a>, at each
process cycle, before any other operation on the buffer.</span></p>
</li>
</ul>
</div>
<div id="audiojack.raw_buffer" class="ulist">
<ul>
<li>
<p><em>pointer</em>, <em>nframes</em> = <strong>raw_buffer</strong>( <em>port</em> ) <em>P</em><br>
<span class="small">Returns the port buffer pointer (as a <em>light userdata</em>) and the number of frames.
It can be used only after having retrieved the buffer with <a href="#audiojack.get_buffer">jack.get_buffer</a>().</span></p>
</li>
</ul>
</div>
<div id="audiojack.seek" class="ulist">
<ul>
<li>
<p><em>position</em>, <em>available</em> = <strong>seek</strong>( <em>port</em> [, <em>position</em> ] ) <em>P</em><br>
<span class="small">Returns the current <em>position</em> in the port&#8217;s buffer and the number of available
samples from the current position to the end of the buffer.<br>
If <em>position</em> is passed as argument, the function sets the current position to that value.</span></p>
</li>
</ul>
</div>
<div id="audiojack.read" class="ulist">
<ul>
<li>
<p><em>sample1</em>, <em>&#8230;&#8203;</em> = <strong>read</strong>( <em>port</em> [, <em>count</em> ] ) <em>P</em><br>
<span class="small">Returns up to <em>count</em> samples from the (input) port buffer.<br>
Samples are read starting from the current position, which is then advanced by the
number of returned samples.<br>
If <em>count</em> exceeds the available samples, this function returns the available samples
only. If no samples are available, it returns <em>nil</em>.<br>
If <em>count</em> is not passed, it defaults to <em>'all the remaining samples'</em>.</span></p>
</li>
</ul>
</div>
<div id="audiojack.write" class="ulist">
<ul>
<li>
<p><em>count</em> = <strong>write</strong>( <em>port</em> [, <em>sample1</em> , <em>&#8230;&#8203;</em> ] ) <em>P</em><br>
<span class="small">Writes the passed samples to the (output) port&#8217;s buffer and returns the <em>count</em> of
written samples.<br>
Samples are written starting from the current position, which is then advanced by <em>count</em>.
If the number of passed samples exceeds the available space in the buffer, the exceeding
samples are discarded.</span></p>
</li>
</ul>
</div>
<div id="audiojack.clear" class="ulist">
<ul>
<li>
<p><em>count</em> = <strong>clear</strong>( <em>port</em> [, <em>count</em> ] ) <em>P</em><br>
<span class="small">Same as <a href="#audiojack.write">jack.write</a>(), with the difference that it writes up to <em>count</em>
samples to zero.<br>
If <em>count</em> is not passed, it defaults to <em>'all the remaining samples'</em>.</span></p>
</li>
</ul>
</div>
<div id="audiojack.copy" class="ulist">
<ul>
<li>
<p><em>count</em> = <strong>copy</strong>( <em>dstport</em>, <em>srcport</em> [, <em>count</em> ] ) <em>P</em><br>
<span class="small">Copies up to <em>count</em> samples from the buffer of the input port <em>srcport</em> to the
buffer of the output port <em>dstport</em> and returns the number of copied samples.<br>
This function uses the current positions of both ports, and advances them by the
number of copied samples.<br>
If <em>count</em> is not passed, it defaults to <em>maxcount</em>, which is defined as the
minimum between the remaining samples in the input port&#8217;s buffer and the space
left in the output port&#8217;s buffer.<br>
If count is passed but it is greater than <em>maxcount</em>, only <em>maxcount</em> samples
are copied.</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_reading_and_writing_midi_data">Reading and writing MIDI data</h3>
<div class="paragraph">
<p><span class="small">Rfr: <a href="http://jackaudio.org/api/group__MIDIAPI.html">Reading and writing MIDI data</a></span></p>
</div>
<div class="paragraph">
<p>The functions described in this section are available only in the
<a href="#jack.process_callback">process callback</a>, and allow to read and write
MIDI events from/to ports of the default MIDI type.</p>
</div>
<div id="midi_event" class="paragraph">
<p>A MIDI event is represented in LuaJack as a couple of values (<em>time</em>, <em>data</em>), where:</p>
</div>
<div class="ulist circles">
<ul class="circles">
<li>
<p><em>time</em> is the frame number of the event, relative to the current period, and</p>
</li>
<li>
<p><em>data</em> is a binary string of length &gt;= 1, containing the MIDI message (<em>&lt;status&gt;&#8230;&#8203;</em>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <em>data</em> value may be handled with Lua&#8217;s native
<a href="http://www.lua.org/manual/5.3/manual.html#pdf-string.pack">string.pack</a>() and
<a href="http://www.lua.org/manual/5.3/manual.html#pdf-string.pack">string.unpack</a>() functions,
or with the utilities provided in the <a href="#midi_utilities">luajack/midi.lua</a> module.</p>
</div>
<div id="midijack.get_buffer" class="ulist">
<ul>
<li>
<p><em>eventcount</em>, <em>lostcount</em> = <strong>get_buffer</strong>( <em>inputport</em> ) <em>P</em><br>
<em>space</em> = <strong>get_buffer</strong>( <em>outputport</em> ) <em>P</em><br>
<span class="small">Retrieves the port buffer.<br>
If <em>port</em> is an input port, this function returns the number of events in the buffer
(<em>eventcount</em>) and the number of lost events (<em>lostcount</em>).
It also initializes the current index to <em>0</em>, i.e. to the first event in the buffer.<br>
If <em>port</em> is an output port, the function returns the <em>space</em> available in the buffer for
writing MIDI event data.<br>
This function must be invoked in the <a href="#jack.process_callback">process callback</a>, at each
process cycle, before any other operation on the buffer.</span></p>
</li>
</ul>
</div>
<div id="midijack.seek" class="ulist">
<ul>
<li>
<p><em>index</em>, <em>available</em> = <strong>seek</strong>( <em>port</em> [, <em>index</em> ] ) <em>P</em><br>
<span class="small">Returns the current <em>index</em> in the (input) port buffer and the number of <em>available</em>
events from the current index to the end of the buffer.<br>
If <em>index</em> is passed as argument, sets the current index to that value.</span></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Only input MIDI ports are seekable (output MIDI ports are not).
</td>
</tr>
</table>
</div>
<div id="midijack.read" class="ulist">
<ul>
<li>
<p><em>time</em>, <em>data</em> = <strong>read</strong>( <em>port</em> [, <em>index</em> ] ) <em>P</em><br>
<span class="small">Returns the <a href="#midi_event">MIDI event</a> from the (input) port&#8217;s buffer at its current index,
which it then advances by <em>1</em>.<br>
If an <em>index</em> is passed as argument, this function sets the current index to that value
before reading the event. If the current index exceeds <em>eventcount - 1</em>, the function
returns <em>nil</em>.</span></p>
</li>
</ul>
</div>
<div id="midijack.write" class="ulist">
<ul>
<li>
<p><em>space</em> = <strong>write</strong>( <em>port</em>, <em>time</em>, <em>data</em> ) <em>P</em><br>
<span class="small">Writes a <a href="#midi_event">MIDI event</a> to the (output) port&#8217;s buffer and returns the <em>space</em>
available in the buffer for the next event data.
If there is not enough space to write the event, this function returns <em>nil</em>.</span></p>
</li>
</ul>
</div>
<div id="midijack.copy" class="ulist">
<ul>
<li>
<p><em>count</em> = <strong>copy</strong>( <em>dstport</em>, <em>srcport</em> [, <em>count</em> ] ) <em>P</em><br>
<span class="small">Copies up to <em>count</em> <a href="#midi_event">MIDI events</a> from the buffer of the input port
<em>srcport</em>  to the buffer of the output port <em>dstport</em>, and returns the number of copied events.
Events are copied starting from the current index of <em>srcport</em>, which is then
advanced by the number of copied events.<br>
If <em>count</em> is not passed, this function attempts to copy all of the remaining events
in the input port&#8217;s buffer that fit in the output port&#8217;s buffer.</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_statistics">Statistics</h3>
<div class="paragraph">
<p><span class="small">Rfr: <a href="http://jackaudio.org/api/statistics_8h.html">statistics.h File Reference</a></span></p>
</div>
<div id="jack.max_delayed_usecs" class="ulist">
<ul>
<li>
<p><em>delay</em> = <strong>max_delayed_usecs</strong>( <em>client</em> ) <em>M</em><br>
<span class="small">Returns the maximum delay reported by the backend since startup or reset.</span></p>
</li>
</ul>
</div>
<div id="jack.xrun_delayed_usecs" class="ulist">
<ul>
<li>
<p><em>delay</em> = <strong>xrun_delayed_usecs</strong>( <em>client</em> ) <em>M</em><br>
<span class="small">Returns the delay in microseconds due to the most recent xrun occurrence.</span></p>
</li>
</ul>
</div>
<div id="jack.reset_max_delayed_usecs" class="ulist">
<ul>
<li>
<p><strong>reset_max_delayed_usecs</strong>( <em>client</em> ) <em>M</em><br>
<span class="small">Resets the maximum delay counter.</span></p>
</li>
</ul>
</div>
<div id="jack.profile" class="ulist">
<ul>
<li>
<p><strong>profile</strong>( <em>client</em>, <em>what</em> )<br>
<em>n</em>, <em>min</em>, <em>max</em>, <em>mean</em>, <em>var</em> = <strong>profile</strong>( <em>client</em> )<br>
<span class="small">Profile the real-time callbacks for <em>client</em>.<br>
The <em>what</em> parameter may be one amongst
<em>start</em> (reset the counters and start profiling),
<em>stop</em> (stop profiling), and
<em>restart</em> (start profiling, but do not reset the counters).
If the <em>what</em> parameter is <em>nil</em> (or none), the function returns
the number of profiled callbacks, followed by the minimum, maximum,
mean and variance of the time (in seconds) they consumed.
Please note that these are only rough estimates.</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_session_api">Session API</h3>
<div class="paragraph">
<p><span class="small">Rfr: <a href="http://jackaudio.org/api/group__SessionClientFunctions.html">Session API for clients</a></span></p>
</div>
<div class="paragraph">
<p>Session clients are expected to use <a href="#jack.session_callback">jack.session_callback</a>() to
register a session callback in order to listen to events sent by the session manage,
which instead uses the functions described below in this section.</p>
</div>
<div id="jack.session_notify" class="ulist">
<ul>
<li>
<p><em>{ reply1, &#8230;&#8203;, replyN }</em> = <strong>session_notify</strong>( <em>client</em>, <em>target</em>, <em>type</em>, <em>path</em> ) <em>M</em><br>
<span class="small">Sends an event to clients that registered a session callback.<br>
The <em>target</em> argument (a string) is the name of the target client, or <em>nil</em> for 'all'.<br>
The event <em>type</em> must be one amongst <em>'save'</em>, <em>'save_and_quit'</em> and <em>'save_template'</em>.<br>
The <em>path</em> argument is the session directory path.<br>
The function returns a table with the replies from the session clients.
Each entry of the table is a subtable containing the following elements:<br>
<strong>reply.uuid</strong> (a string): the client&#8217;s UUID;<br>
<strong>reply.name</strong> (a string): the client&#8217;s name;<br>
<strong>reply.command</strong> (a string): the command line needed to restore the client;<br>
<strong>reply.save_error</strong> (<em>true</em> or <em>nil</em>): session flag;<br>
<strong>reply.need_terminal</strong> (<em>true</em> or <em>nil</em>): session flag.</span></p>
</li>
</ul>
</div>
<div id="jack.has_session_callback" class="ulist">
<ul>
<li>
<p><em>boolean</em> = <strong>has_session_callback</strong>( <em>client</em>, <em>clientname</em> ) <em>M</em><br>
<span class="small">Returns <em>true</em> if the client named <em>clientname</em> has registered a session callback,
<em>false</em> otherwise.</span></p>
</li>
</ul>
</div>
<div id="jack.reserve_client_name" class="ulist">
<ul>
<li>
<p><strong>reserve_client_name</strong>( <em>client</em>, <em>clientname</em> ) <em>M</em><br>
<span class="small">Reserves the client name <em>clientname</em> and associates it with the UUID <em>uuid</em>.</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ringbuffers">Ringbuffers</h3>
<div class="paragraph">
<p><span class="small">Rfr: <a href="http://jackaudio.org/api/ringbuffer_8h.html">ringbuffer.h File Reference</a></span></p>
</div>
<div class="paragraph">
<p>LuaJack wraps the
<a href="http://jackaudio.org/api/ringbuffer_8h.html">lock-free ringbuffers</a>
provided by JACK for inter-thread communication, giving them a message-oriented
nature and adding means to use them in conjunction with sockets.</p>
</div>
<div id="ringbuffersmessage" class="paragraph">
<p>In LuaJack, data is written to and read from ringbuffers in form of tagged
<strong>messages</strong>, each composed of a <em>tag</em> (an integer number) optionally followed
by <em>data</em> (a Lua string). The tag can be used to represent the 'type' of the
message or any other information (LuaJack by itself does not interpret it by any means).</p>
</div>
<div id="jack.ringbuffer" class="ulist">
<ul>
<li>
<p><em>rbuf</em> = <strong>ringbuffer</strong>( <em>client</em>, <em>size</em> [, <em>mlock</em> [, <em>usepipe</em> ]] ) <em>M</em><br>
<span class="small">Creates a ringbuffer of the specified <em>size</em> (in bytes) and returns a
ringbuffer reference for subsequent operations. The returned reference
is an integer which may be passed as argument to <a href="#jack.thread">thread scripts</a>.<br>
If <em>mlock=true</em>, the buffer is locked in memory.<br>
If <em>usepipe=true</em>, a pipe is associated with the ringbuffer allowing its 'read' end to be
turned in an object compatible with
<a href="https://github.com/diegonehab/luasocket">sockect.select</a>()
and thus to be used in conjunction with sockets or other fd-based
communication mechanisms (of course, you don&#8217;t want to do this in an
audio processing realtime thread&#8230;&#8203;).<br>
This function is only available in the <a href="#luajack.contexts">main context</a> and must be
used before the client is <a href="#jack.activate">activated</a>.</span></p>
</li>
</ul>
</div>
<div id="jack.ringbuffer_write" class="ulist">
<ul>
<li>
<p><em>ok</em> = <strong>ringbuffer_write</strong>( <em>rbuf</em>, <em>tag</em> [, <em>data</em> ] ) <em>MPT</em><br>
<span class="small">Write a <a href="#ringbuffersmessage">message</a> to the ringbuffer <em>rbuf</em>.<br>
Returns <em>true</em> on success, or <em>false</em> if there was not enough space for the message.</span></p>
</li>
</ul>
</div>
<div id="jack.ringbuffer_read" class="ulist">
<ul>
<li>
<p><em>tag</em>, <em>data</em> = <strong>ringbuffer_read</strong>( <em>rbuf</em> ) <em>MPT</em><br>
<span class="small">Read a <a href="#ringbuffersmessage">message</a> from the ringbuffer <em>rbuf</em>.
Returns <em>tag</em>=<em>nil</em> if there are no messages available.<br>
If the message is composed of the <em>tag</em> only, then <em>data</em> is returned as an
empty string (so that <em>data:len=0</em>).</span></p>
</li>
</ul>
</div>
<div id="jack.ringbuffer_reset" class="ulist">
<ul>
<li>
<p><strong>ringbuffer_reset</strong>( <em>rbuf</em> ) <em>MPT</em><br>
<span class="small">Resets the ringbuffer <em>rbuf</em>.</span></p>
</li>
</ul>
</div>
<div id="jack.ringbuffer_peek" class="ulist">
<ul>
<li>
<p><em>tag</em>, <em>data</em> = <strong>ringbuffer_peek</strong>( <em>rbuf</em> ) <em>MPT</em><br>
<span class="small">Same as <a href="#jack.ringbuffer_read">ringbuffer_read</a>, but does not advance the message pointer.</span></p>
</li>
</ul>
</div>
<div id="jack.ringbuffer_read_advance" class="ulist">
<ul>
<li>
<p><em>ok</em> = <strong>ringbuffer_read_advance</strong>( <em>rbuf</em> ) <em>MPT</em><br>
<span class="small">Advances the message read pointer without reading the message.</span></p>
</li>
</ul>
</div>
<div id="jack.ringbuffer_getfd" class="ulist">
<ul>
<li>
<p><em>fd</em> = <strong>ringbuffer_getfd</strong>( <em>rbuf</em> ) <em>MPT</em><br>
<span class="small">Returns the file descriptor of the pipe associated with the ringbuffer <em>rbuf</em>,
or <em>nil</em> if it was <a href="#jack.ringbuffer">created</a> without pipe.</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_selectable_ringbuffers">Selectable ringbuffers</h3>
<div class="paragraph">
<p>@@ TODO</p>
</div>
</div>
<div class="sect2">
<h3 id="_jack_server_control_api">JACK server control API</h3>
<div class="paragraph">
<p>Not implemented yet.</p>
</div>
</div>
<div class="sect2">
<h3 id="_non_callback_api">Non-callback API</h3>
<div class="paragraph">
<p>Not supported.</p>
</div>
</div>
<div class="sect2">
<h3 id="_internal_clients_api">Internal clients API</h3>
<div class="paragraph">
<p>Not supported.</p>
</div>
</div>
<div class="sect2">
<h3 id="_metadata_api">Metadata API</h3>
<div class="paragraph">
<p>Not implemented yet.</p>
</div>
</div>
<div class="sect2">
<h3 id="_additional_functions">Additional functions</h3>
<div id="jack.sleep" class="ulist">
<ul>
<li>
<p><strong>sleep</strong>( [<em>seconds</em>] )<br>
<span class="small">Sleeps for the specified number of <em>seconds</em> (if <em>seconds</em> is negative or <em>nil</em>,
sleeps forever).<br>
This function must be used to implement the main loop in the <a href="#luajack.contexts">main context</a>,
and can optionally be used in thread contexts as well.</span></p>
</li>
</ul>
</div>
<div id="jack.verbose" class="ulist">
<ul>
<li>
<p><strong>verbose</strong>( <em>onoff</em> )<br>
<span class="small">If <em>onoff='on'</em>, enables the LuaJack verbose mode. If <em>onoff='off'</em>, it disables it.
By default, the verbose mode is disabled.</span></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="midi_utilities">MIDI utilities (luajack.midi)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <strong>luajack.midi</strong> module is a LuaJack submodule that provides convenient utilities
for dealing with MIDI messages in Lua.</p>
</div>
<div class="paragraph">
<p>Although it is part of the LuaJack package, <strong>luajack.midi</strong> is actually an independent module
that can be used also in non-LuaJack applications. Since it is a self-contained script written
in pure Lua, it can be easily customized or replaced
(its source is in the <em>luajack/midi.lua</em> file in the LuaJack package).</p>
</div>
<div class="paragraph">
<p>The module is to be loaded in the usual Lua way, e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="lua"> <span class="tok-n">midi</span> <span class="tok-o">=</span> <span class="tok-nb">require</span><span class="tok-p">(</span><span class="tok-s2">&quot;luajack.midi&quot;</span><span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>and returns a table containing the utilities described in the subsections that follow
(it is assumed here that the table is named <strong>'midi'</strong> as in the above example, but a
different name could be used as well).</p>
</div>
<div class="sect2">
<h3 id="_encoding_midi_messages">Encoding MIDI messages</h3>
<div class="paragraph">
<p>Each of the following routines returns a binary string containing an encoded
MIDI message (starting from the MIDI status byte) with the passed parameters.</p>
</div>
<div id="midi.note_onoff" class="ulist">
<ul>
<li>
<p><em>msg</em> = <strong>note_off</strong>( <em>channel</em>, <em>key</em> [, <em>velocity</em> ] )<br>
<em>msg</em> = <strong>note_on</strong>( <em>channel</em>, <em>key</em> [, <em>velocity</em> ] )<br>
<span class="small">Parameters: <em>channel</em> = 1-16, <em>key</em> = 0-127, <em>velocity</em> = 0-127 (default=64).</span></p>
</li>
</ul>
</div>
<div id="midi.aftertouch" class="ulist">
<ul>
<li>
<p><em>msg</em> = <strong>aftertouch</strong>( <em>channel</em>, <em>key</em>, <em>pressure</em> ) a.k.a. 'polyphonic key pressure'<br>
<span class="small">Parameters: <em>channel</em> = 1-16, <em>key</em> = 0-127, <em>pressure</em> = 0-127.</span></p>
</li>
</ul>
</div>
<div id="midi.control_change" class="ulist">
<ul>
<li>
<p><em>msg</em> = <strong>control_change</strong>( <em>channel</em>, <em>control</em> [, <em>value</em> ] )<br>
<span class="small">Parameters: <em>channel</em> = 1-16, <em>control</em> = 0-127 or controller name,
<em>value</em> = 0-127 or <em>'on'</em>|<em>'off'</em> (default=0='off').<br>
See the table in the following section for <a href="#midi.controllers">controller names</a>.</span></p>
</li>
</ul>
</div>
<div id="midi.program_change" class="ulist">
<ul>
<li>
<p><em>msg</em> = <strong>program_change</strong>( <em>channel</em>, <em>number</em> )<br>
<span class="small">Parameters: <em>channel</em> = 1-16, <em>number</em> = 1-128.</span></p>
</li>
</ul>
</div>
<div id="midi.channel_pressure" class="ulist">
<ul>
<li>
<p><em>msg</em> = <strong>channel_pressure</strong>( <em>channel</em>, <em>pressure</em> )<br>
<span class="small">Parameters: <em>channel</em> = 1-16, <em>pressure</em> = 0-127.</span></p>
</li>
</ul>
</div>
<div id="midi.pitch_wheel" class="ulist">
<ul>
<li>
<p><em>msg</em> = <strong>pitch_wheel</strong>( <em>channel</em>, <em>value</em> ) a.k.a. 'pitch bend change'<br>
<span class="small">Parameters: <em>channel</em> = 1-16, <em>value</em> = 0-16383 (0x3fff).</span></p>
</li>
</ul>
</div>
<div id="midi.mtc_quarter_frame" class="ulist">
<ul>
<li>
<p><em>msg</em> = <strong>mtc_quarter_frame</strong>( <em>nnn</em>, <em>dddd</em> ) a.k.a. 'time code quarter frame'<br>
<span class="small">Parameters: <em>nnn</em> = 0-7 (MTC message type), <em>dddd</em> = 0-15 (MTC message value).</span></p>
</li>
</ul>
</div>
<div id="midi.song_position" class="ulist">
<ul>
<li>
<p><em>msg</em> = <strong>song_position</strong>( <em>value</em> )<br>
<span class="small">Parameters: <em>value</em> = 0-16383 (0x3fff).</span></p>
</li>
</ul>
</div>
<div id="midi.song_select" class="ulist">
<ul>
<li>
<p><em>msg</em> = <strong>song_select</strong>( <em>number</em> )<br>
<span class="small">Parameters: <em>number</em> = 1-128.</span></p>
</li>
</ul>
</div>
<div id="midi.encode" class="ulist">
<ul>
<li>
<p><em>msg</em> = <strong>tune_request</strong>( )<br>
<em>msg</em> = <strong>end_of_exclusive</strong>( )<br>
<em>msg</em> = <strong>clock</strong>( )<br>
<em>msg</em> = <strong>start</strong>( )<br>
<em>msg</em> = <strong>continue</strong>( )<br>
<em>msg</em> = <strong>stop</strong>( )<br>
<em>msg</em> = <strong>active_sensing</strong>( )<br>
<em>msg</em> = <strong>reset</strong>( )<br>
<span class="small">Parameters: none.</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_decoding_midi_messages">Decoding MIDI messages</h3>
<div id="midi.decode" class="ulist">
<ul>
<li>
<p><em>name</em>, <em>channel</em>, <em>parameters</em> = <strong>decode</strong>( <em>msg</em> [, <em>stringize</em> ] )<br>
<span class="small">Decodes a MIDI message. The <em>msg</em> argument is expected to be a binary string
containing the MIDI message starting from the MIDI status byte.<br>
Returns the MIDI message <em>name</em> (or <em>nil</em> if not recognized), the <em>channel</em>
(1-16,  or <em>nil</em> if not applicable), and a table containing the decoded <em>parameters</em>
(see the table below).<br>
If <em>stringize</em> is <em>true</em>, the parameters are returned as a string instead of a table
(this may be useful for dumps).</span></p>
</li>
</ul>
</div>
<div id="midi.tostring" class="ulist">
<ul>
<li>
<p><em>string</em> = <strong>tostring</strong>( <em>time</em>, <em>msg</em> )<br>
<span class="small">Returns a printable string containing the passed <em>time</em> (an integer) and the decoded <em>msg</em>
(for dumps).</span></p>
</li>
</ul>
</div>
<div id="midi.tohex" class="ulist">
<ul>
<li>
<p><em>msg</em> = <strong>tohex</strong>( <em>msg</em> )<br>
<span class="small">Returns a string containing the <em>msg</em> bytes in hexadecimal format (e.g. '84 0c 2f').</span></p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. MIDI messages</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 5%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Message name</th>
<th class="tableblock halign-left valign-top">Channel</th>
<th class="tableblock halign-left valign-top">Parameters table contents</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'note off'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">key = 0-127, velocity = 0-127</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'note on'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">key = 0-127, velocity = 0-127</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'aftertouch'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">key = 0-127, pressure = 0-127</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'control change'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number = 0-127, value = 0-127, controller = 'controller name' (see table below)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'program change'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number = 1-128</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'channel pressure'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pressure = 0-127</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'pitch wheel'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">value = 0-16383 (0x3fff), lsb = 0-127, msb = 0-127</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'system exclusive'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>nil</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>@@ TBD</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'mtc quarter frame'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>nil</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">nnn = 0-7, dddd = 0-15, value = 0-127 (0nnndddd)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'song position'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>nil</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">value = 0-16383 (0x3fff), lsb = 0-127, msb = 0-127</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'song select'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>nil</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number = 1-128</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'tune request'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>nil</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'end of exclusive'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>nil</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'clock'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>nil</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'start'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>nil</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'continue'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>nil</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'stop'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>nil</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'active sensing'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>nil</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'reset'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>nil</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
</tr>
</tbody>
</table>
<table id="midi.controllers" class="tableblock frame-all grid-all spread">
<caption class="title">Table 2. MIDI controllers</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Controller number</th>
<th class="tableblock halign-left valign-top">Controller name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 (0x00)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'bank select (coarse)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 (0x01)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'modulation wheel (coarse)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 (0x02)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'breath controller (coarse)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4 (0x04)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'foot pedal (coarse)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5 (0x05)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'portamento time (coarse)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6 (0x06)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'data entry (coarse)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7 (0x07)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'volume (coarse)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8 (0x08)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'balance (coarse)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10 (0x0a)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'pan position (coarse)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11 (0x0b)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'expression (coarse)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12 (0x0c)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'effect control 1 (coarse)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">13 (0x0d)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'effect control 2 (coarse)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">16 (0x10)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'general purpose slider 1'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">17 (0x11)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'general purpose slider 2'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">18 (0x12)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'general purpose slider 3'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">19 (0x13)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'general purpose slider 4'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">32 (0x20)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'bank select (fine)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">33 (0x21)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'modulation wheel (fine)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">34 (0x22)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'breath controller (fine)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">36 (0x24)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'foot pedal (fine)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">37 (0x25)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'portamento time (fine)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">38 (0x26)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'data entry (fine)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">39 (0x27)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'volume (fine)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">40 (0x28)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'balance (fine)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">42 (0x2a)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'pan position (fine)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">43 (0x2b)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'expression (fine)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">44 (0x2c)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'effect control 1 (fine)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">45 (0x2d)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'effect control 2 (fine)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">64 (0x40)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'hold pedal'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">65 (0x41)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'portamento'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">66 (0x42)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'sustenuto pedal'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">67 (0x43)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'soft pedal'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">68 (0x44)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'legato pedal'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">69 (0x45)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'hold 2 pedal'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">70 (0x46)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'sound variation'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">71 (0x47)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'sound timbre'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">72 (0x48)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'sound release time'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">73 (0x49)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'sound attack time'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">74 (0x4a)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'sound brightness'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">75 (0x4b)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'sound control 6'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">76 (0x4c)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'sound control 7'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">77 (0x4d)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'sound control 8'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">78 (0x4e)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'sound control 9'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">79 (0x4f)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'sound control 10'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">80 (0x50)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'general purpose button 1'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">81 (0x51)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'general purpose button 2'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">82 (0x52)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'general purpose button 3'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">83 (0x53)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'general purpose button 4'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">91 (0x5b)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'effects level'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">92 (0x5c)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'tremulo level'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">93 (0x5d)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'chorus level'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">94 (0x5e)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'celeste level'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">95 (0x5f)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'phaser level'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">96 (0x60)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'data button increment'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">97 (0x61)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'data button decrement'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">98 (0x62)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'non-registered parameter (fine)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">99 (0x63)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'non-registered parameter (coarse)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">100 (0x64)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'registered parameter (fine)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">101 (0x65)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'registered parameter (coarse)'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">120 (0x78)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'all sound off'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">121 (0x79)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'all controllers off'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">122 (0x7a)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'local keyboard'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">123 (0x7b)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'all notes off'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">124 (0x7c)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'omni mode off'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">125 (0x7d)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'omni mode on'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">126 (0x7e)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'mono operation'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">127 (0x7f)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'poly operation'</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_other_midi_utilities">Other MIDI utilities</h3>
<div id="midi.note_key" class="ulist">
<ul>
<li>
<p><em>msg</em> = <strong>note_key</strong>( <em>frequency</em> )<br>
<span class="small">Returns the nearest MIDI note key corresponding to <em>frequency</em> (Hz).</span></p>
</li>
</ul>
</div>
<div id="midi.note_frequency" class="ulist">
<ul>
<li>
<p><em>msg</em> = <strong>note_frequency</strong>( <em>key</em> )<br>
<span class="small">Returns the <em>frequency</em> (Hz) corresponding to the MIDI note <em>key</em>.</span></p>
</li>
</ul>
</div>
<div id="midi.tmsg" class="ulist">
<ul>
<li>
<p><em>tmsg</em> = <strong>tmsg</strong>( <em>time</em>, <em>msg</em> )<br>
<span class="small">Returns a binary string obtained by concatenating the passed <em>time</em> (an integer)
and the binary MIDI <em>msg</em> (this format can be convenient if one wants to send MIDI events
over <a href="#_ringbuffers">ringbuffers</a>).</span></p>
</li>
</ul>
</div>
<div id="midi.time_msg" class="ulist">
<ul>
<li>
<p><em>time</em>, <em>msg</em> = <strong>time_msg</strong>( <em>tmsg</em> )<br>
<span class="small">Extracts the <em>time</em> and <em>msg</em> from a <em>tmsg</em> binary string constructed with the
<a href="#midi.tmsg">midi.tmsg</a>() function.</span></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnote_1">
<a href="#_footnoteref_1">1</a>. This manual is written in <a href="http://www.methods.co.nz/asciidoc/">AsciiDoc</a>, rendered with <a href="http://asciidoctor.org/">AsciiDoctor</a> and a CSS from the <a href="https://github.com/asciidoctor/asciidoctor-stylesheet-factory">AsciiDoctor Stylesheet Factory</a>. The PDF version is produced with <a href="https://github.com/asciidoctor/asciidoctor-pdf">AsciiDoctor-Pdf</a>.
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 0.5<br>
Last updated 2018-04-14 21:24:23 CEST
</div>
</div>
</body>
</html>